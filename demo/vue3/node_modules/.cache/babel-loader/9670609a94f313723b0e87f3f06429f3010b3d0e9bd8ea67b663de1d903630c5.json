{"ast":null,"code":"/*!\n * wavesurfer.js cursor plugin 6.4.0 (2022-11-05)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define(\"WaveSurfer\", [], factory);else if (typeof exports === 'object') exports[\"WaveSurfer\"] = factory();else root[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"cursor\"] = factory();\n})(self, () => {\n  return (/******/(() => {\n      // webpackBootstrap\n      /******/\n      \"use strict\";\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\"./src/plugin/cursor/index.js\":\n        /*!************************************!*\\\n          !*** ./src/plugin/cursor/index.js ***!\n          \\************************************/\n        /***/\n        (module, exports) => {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n              });\n            } else {\n              obj[key] = value;\n            }\n            return obj;\n          }\n          /**\n           * @typedef {Object} CursorPluginParams\n           * @property {?boolean} deferInit Set to true to stop auto init in `addPlugin()`\n           * @property {boolean} hideOnBlur=true Hide the cursor when the mouse leaves the\n           * waveform\n           * @property {string} width='1px' The width of the cursor\n           * @property {string} color='black' The color of the cursor\n           * @property {number|string} opacity='0.25' The opacity of the cursor\n           * @property {string} style='solid' The border style of the cursor\n           * @property {number} zIndex=3 The z-index of the cursor element\n           * @property {object} customStyle An object with custom styles which are applied\n           * to the cursor element\n           * @property {boolean} showTime=false Show the time on the cursor.\n           * @property {object} customShowTimeStyle An object with custom styles which are\n           * applied to the cursor time element.\n           * @property {boolean} followCursorY=false Use `true` to make the time on\n           * the cursor follow the x and the y-position of the mouse. Use `false` to make the\n           * it only follow the x-position of the mouse.\n           * @property {function} formatTimeCallback Formats the timestamp on the cursor.\n           * @property {boolean} isDestroyCalled  true if called destroy before the ready event fired\n           */\n          /**\n           * Displays a thin line at the position of the cursor on the waveform.\n           *\n           * @implements {PluginClass}\n           * @extends {Observer}\n           * @example\n           * // es6\n           * import CursorPlugin from 'wavesurfer.cursor.js';\n           *\n           * // commonjs\n           * var CursorPlugin = require('wavesurfer.cursor.js');\n           *\n           * // if you are using <script> tags\n           * var CursorPlugin = window.WaveSurfer.cursor;\n           *\n           * // ... initialising wavesurfer with the plugin\n           * var wavesurfer = WaveSurfer.create({\n           *   // wavesurfer options ...\n           *   plugins: [\n           *     CursorPlugin.create({\n           *       // plugin options ...\n           *     })\n           *   ]\n           * });\n           */\n          var CursorPlugin = /*#__PURE__*/function () {\n            /**\n             * Construct the plugin class. You probably want to use `CursorPlugin.create`\n             * instead.\n             *\n             * @param {CursorPluginParams} params Plugin parameters\n             * @param {object} ws Wavesurfer instance\n             */\n            function CursorPlugin(params, ws) {\n              var _this = this;\n              _classCallCheck(this, CursorPlugin);\n              _defineProperty(this, \"defaultParams\", {\n                hideOnBlur: true,\n                width: '1px',\n                color: 'black',\n                opacity: '0.25',\n                style: 'solid',\n                zIndex: 4,\n                customStyle: {},\n                customShowTimeStyle: {},\n                showTime: false,\n                followCursorY: false,\n                formatTimeCallback: null\n              });\n              _defineProperty(this, \"_onMousemove\", function (e) {\n                var event = _this.util.withOrientation(e, _this.wavesurfer.params.vertical);\n                var bbox = _this.wrapper.getBoundingClientRect();\n                var y = 0;\n                var x = _this.wrapper.scrollLeft + event.clientX - bbox.left;\n                var displayTimeWidth = _this.displayTime ? _this.displayTime.getBoundingClientRect().width : 0;\n                var flip = bbox.right < event.clientX + displayTimeWidth;\n                if (_this.params.showTime && _this.params.followCursorY) {\n                  // follow y-position of the mouse\n                  y = event.clientY - (bbox.top + bbox.height / 2);\n                }\n                _this.updateCursorPosition(x, y, flip);\n              });\n              _defineProperty(this, \"_onMouseenter\", function () {\n                return _this.showCursor();\n              });\n              _defineProperty(this, \"_onMouseleave\", function () {\n                return _this.hideCursor();\n              });\n              this.wavesurfer = ws;\n              this.style = ws.util.style;\n              this.util = ws.util;\n              /**\n               * The cursor HTML element\n               *\n               * @type {?HTMLElement}\n               */\n              this.cursor = null;\n              /**\n               * displays the time next to the cursor\n               *\n               * @type {?HTMLElement}\n               */\n              this.showTime = null;\n              /**\n               * The html container that will display the time\n               *\n               * @type {?HTMLElement}\n               */\n              this.displayTime = null;\n              /**\n               * true if call destory before ready event\n               * @type {boolean}\n               */\n              this.isDestroyCalled = false;\n              this.params = Object.assign({}, this.defaultParams, params);\n            }\n            _createClass(CursorPlugin, [{\n              key: \"_onReady\",\n              value: function _onReady() {\n                if (this.isDestroyCalled) {\n                  return;\n                }\n                this.wrapper = this.wavesurfer.drawer.wrapper;\n                this.cursor = this.util.withOrientation(this.wrapper.appendChild(document.createElement('cursor')), this.wavesurfer.params.vertical);\n                this.style(this.cursor, Object.assign({\n                  position: 'absolute',\n                  zIndex: this.params.zIndex,\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  width: '0',\n                  display: 'flex',\n                  borderRightStyle: this.params.style,\n                  borderRightWidth: this.params.width,\n                  borderRightColor: this.params.color,\n                  opacity: this.params.opacity,\n                  pointerEvents: 'none'\n                }, this.params.customStyle));\n                if (this.params.showTime) {\n                  this.showTime = this.util.withOrientation(this.wrapper.appendChild(document.createElement('showTitle')), this.wavesurfer.params.vertical);\n                  this.style(this.showTime, Object.assign({\n                    position: 'absolute',\n                    zIndex: this.params.zIndex,\n                    left: 0,\n                    top: 0,\n                    bottom: 0,\n                    width: 'auto',\n                    display: 'flex',\n                    opacity: this.params.opacity,\n                    pointerEvents: 'none',\n                    height: '100%'\n                  }, this.params.customStyle));\n                  this.displayTime = this.util.withOrientation(this.showTime.appendChild(document.createElement('div')), this.wavesurfer.params.vertical);\n                  this.style(this.displayTime, Object.assign({\n                    display: 'inline',\n                    pointerEvents: 'none',\n                    margin: 'auto',\n                    visibility: 'hidden' // initial value will be hidden just for measuring purpose\n                  }, this.params.customShowTimeStyle));\n\n                  // initial value to measure display width\n                  this.displayTime.innerHTML = this.formatTime(0);\n                }\n                this.wrapper.addEventListener('mousemove', this._onMousemove);\n                if (this.params.hideOnBlur) {\n                  // ensure elements are hidden initially\n                  this.hideCursor();\n                  this.wrapper.addEventListener('mouseenter', this._onMouseenter);\n                  this.wrapper.addEventListener('mouseleave', this._onMouseleave);\n                }\n              }\n\n              /**\n               * Initialise the plugin (used by the Plugin API)\n               */\n            }, {\n              key: \"init\",\n              value: function init() {\n                var _this2 = this;\n                if (this.wavesurfer.isReady) {\n                  this._onReady();\n                } else {\n                  this.wavesurfer.once('ready', function () {\n                    return _this2._onReady();\n                  });\n                }\n              }\n\n              /**\n               * Destroy the plugin (used by the Plugin API)\n               */\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                if (!this.cursorTime || !this.showTime) {\n                  this.isDestroyCalled = true;\n                  return;\n                }\n                if (this.params.showTime) {\n                  this.showTime && this.showTime.remove();\n                }\n                this.cursor && this.cursor.remove();\n                this.wrapper.removeEventListener('mousemove', this._onMousemove);\n                if (this.params.hideOnBlur) {\n                  this.wrapper.removeEventListener('mouseenter', this._onMouseenter);\n                  this.wrapper.removeEventListener('mouseleave', this._onMouseleave);\n                }\n              }\n\n              /**\n               * Update the cursor position\n               *\n               * @param {number} xpos The x offset of the cursor in pixels\n               * @param {number} ypos The y offset of the cursor in pixels\n               * @param {boolean} flip Flag to flip duration text from right to left\n               */\n            }, {\n              key: \"updateCursorPosition\",\n              value: function updateCursorPosition(xpos, ypos) {\n                var flip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n                this.style(this.cursor, {\n                  left: \"\".concat(xpos, \"px\")\n                });\n                if (this.params.showTime) {\n                  var duration = this.wavesurfer.getDuration();\n                  var elementWidth = this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n                  var scrollWidth = this.wavesurfer.drawer.getScrollX();\n                  var scrollTime = duration / this.wavesurfer.drawer.width * scrollWidth;\n                  var timeValue = Math.max(0, (xpos - this.wrapper.scrollLeft) / elementWidth * duration) + scrollTime;\n                  var formatValue = this.formatTime(timeValue);\n                  if (flip) {\n                    var textOffset = this.displayTime.getBoundingClientRect().width;\n                    xpos -= textOffset;\n                  }\n                  this.style(this.showTime, {\n                    left: \"\".concat(xpos, \"px\"),\n                    top: \"\".concat(ypos, \"px\")\n                  });\n                  this.style(this.displayTime, {\n                    visibility: 'visible'\n                  });\n                  this.displayTime.innerHTML = \"\".concat(formatValue);\n                }\n              }\n\n              /**\n               * Show the cursor\n               */\n            }, {\n              key: \"showCursor\",\n              value: function showCursor() {\n                this.style(this.cursor, {\n                  display: 'flex'\n                });\n                if (this.params.showTime) {\n                  this.style(this.showTime, {\n                    display: 'flex'\n                  });\n                }\n              }\n\n              /**\n               * Hide the cursor\n               */\n            }, {\n              key: \"hideCursor\",\n              value: function hideCursor() {\n                this.style(this.cursor, {\n                  display: 'none'\n                });\n                if (this.params.showTime) {\n                  this.style(this.showTime, {\n                    display: 'none'\n                  });\n                }\n              }\n\n              /**\n               * Format the timestamp for `cursorTime`.\n               *\n               * @param {number} cursorTime Time in seconds\n               * @returns {string} Formatted timestamp\n               */\n            }, {\n              key: \"formatTime\",\n              value: function formatTime(cursorTime) {\n                cursorTime = isNaN(cursorTime) ? 0 : cursorTime;\n                if (this.params.formatTimeCallback) {\n                  return this.params.formatTimeCallback(cursorTime);\n                }\n                return [cursorTime].map(function (time) {\n                  return [Math.floor(time % 3600 / 60),\n                  // minutes\n                  ('00' + Math.floor(time % 60)).slice(-2),\n                  // seconds\n                  ('000' + Math.floor(time % 1 * 1000)).slice(-3) // milliseconds\n                  ].join(':');\n                });\n              }\n            }], [{\n              key: \"create\",\n              value:\n              /**\n               * Cursor plugin definition factory\n               *\n               * This function must be used to create a plugin definition which can be\n               * used by wavesurfer to correctly instantiate the plugin.\n               *\n               * @param  {CursorPluginParams} params parameters use to initialise the\n               * plugin\n               * @return {PluginDefinition} an object representing the plugin\n               */\n              function create(params) {\n                return {\n                  name: 'cursor',\n                  deferInit: params && params.deferInit ? params.deferInit : false,\n                  params: params,\n                  staticProps: {},\n                  instance: CursorPlugin\n                };\n              }\n\n              /**\n               * @type {CursorPluginParams}\n               */\n            }]);\n\n            return CursorPlugin;\n          }();\n          exports[\"default\"] = CursorPlugin;\n          module.exports = exports.default;\n\n          /***/\n        }\n\n        /******/\n      };\n      /************************************************************************/\n      /******/ // The module cache\n      /******/\n      var __webpack_module_cache__ = {};\n      /******/\n      /******/ // The require function\n      /******/\n      function __webpack_require__(moduleId) {\n        /******/ // Check if module is in cache\n        /******/var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n        if (cachedModule !== undefined) {\n          /******/return cachedModule.exports;\n          /******/\n        }\n        /******/ // Create a new module (and put it into the cache)\n        /******/\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/ // no module.id needed\n          /******/ // no module.loaded needed\n          /******/exports: {}\n          /******/\n        };\n        /******/\n        /******/ // Execute the module function\n        /******/\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n        /******/ // Return the exports of the module\n        /******/\n        return module.exports;\n        /******/\n      }\n      /******/\n      /************************************************************************/\n      /******/\n      /******/ // startup\n      /******/ // Load entry module and return exports\n      /******/ // This entry module is referenced by other modules so it can't be inlined\n      /******/\n      var __webpack_exports__ = __webpack_require__(\"./src/plugin/cursor/index.js\");\n      /******/\n      /******/\n      return __webpack_exports__;\n      /******/\n    })()\n  );\n});","map":{"version":3,"mappings":"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","names":["module","define","exports","root","CursorPlugin","params","ws","_classCallCheck","_defineProperty","hideOnBlur","width","color","opacity","style","zIndex","customStyle","customShowTimeStyle","showTime","followCursorY","formatTimeCallback","event","_this","util","withOrientation","e","wavesurfer","vertical","bbox","wrapper","getBoundingClientRect","y","x","scrollLeft","clientX","left","displayTimeWidth","displayTime","flip","right","clientY","top","height","updateCursorPosition","showCursor","hideCursor","cursor","isDestroyCalled","Object","assign","defaultParams","_createClass","key","value","drawer","appendChild","document","createElement","position","bottom","display","borderRightStyle","borderRightWidth","borderRightColor","pointerEvents","margin","visibility","innerHTML","formatTime","addEventListener","_onMousemove","_onMouseenter","_onMouseleave","isReady","_onReady","once","_this2","cursorTime","remove","removeEventListener","xpos","ypos","duration","getDuration","elementWidth","pixelRatio","scrollWidth","getScrollX","scrollTime","timeValue","Math","max","formatValue","textOffset","isNaN","map","floor","time","slice","join","name","deferInit","staticProps","instance","__webpack_modules__"],"sourceRoot":"","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/src/plugin/cursor/index.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"cursor\"] = factory();\n})(self, () => {\nreturn ","/**\n * @typedef {Object} CursorPluginParams\n * @property {?boolean} deferInit Set to true to stop auto init in `addPlugin()`\n * @property {boolean} hideOnBlur=true Hide the cursor when the mouse leaves the\n * waveform\n * @property {string} width='1px' The width of the cursor\n * @property {string} color='black' The color of the cursor\n * @property {number|string} opacity='0.25' The opacity of the cursor\n * @property {string} style='solid' The border style of the cursor\n * @property {number} zIndex=3 The z-index of the cursor element\n * @property {object} customStyle An object with custom styles which are applied\n * to the cursor element\n * @property {boolean} showTime=false Show the time on the cursor.\n * @property {object} customShowTimeStyle An object with custom styles which are\n * applied to the cursor time element.\n * @property {boolean} followCursorY=false Use `true` to make the time on\n * the cursor follow the x and the y-position of the mouse. Use `false` to make the\n * it only follow the x-position of the mouse.\n * @property {function} formatTimeCallback Formats the timestamp on the cursor.\n * @property {boolean} isDestroyCalled  true if called destroy before the ready event fired\n */\n\n/**\n * Displays a thin line at the position of the cursor on the waveform.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import CursorPlugin from 'wavesurfer.cursor.js';\n *\n * // commonjs\n * var CursorPlugin = require('wavesurfer.cursor.js');\n *\n * // if you are using <script> tags\n * var CursorPlugin = window.WaveSurfer.cursor;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     CursorPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class CursorPlugin {\n    /**\n     * Cursor plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {CursorPluginParams} params parameters use to initialise the\n     * plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'cursor',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {},\n            instance: CursorPlugin\n        };\n    }\n\n    /**\n     * @type {CursorPluginParams}\n     */\n    defaultParams = {\n        hideOnBlur: true,\n        width: '1px',\n        color: 'black',\n        opacity: '0.25',\n        style: 'solid',\n        zIndex: 4,\n        customStyle: {},\n        customShowTimeStyle: {},\n        showTime: false,\n        followCursorY: false,\n        formatTimeCallback: null\n    };\n\n    /**\n     * @param {object} e Mouse move event\n     */\n    _onMousemove = e => {\n        const event = this.util.withOrientation(e, this.wavesurfer.params.vertical);\n        const bbox = this.wrapper.getBoundingClientRect();\n        let y = 0;\n        let x = this.wrapper.scrollLeft + event.clientX - bbox.left;\n        const displayTimeWidth = this.displayTime ? this.displayTime.getBoundingClientRect().width : 0;\n        let flip = bbox.right < event.clientX + displayTimeWidth;\n\n        if (this.params.showTime && this.params.followCursorY) {\n            // follow y-position of the mouse\n            y = event.clientY - (bbox.top + bbox.height / 2);\n        }\n\n        this.updateCursorPosition(x, y, flip);\n    };\n\n    /**\n     * @returns {void}\n     */\n    _onMouseenter = () => this.showCursor();\n\n    /**\n     * @returns {void}\n     */\n    _onMouseleave = () => this.hideCursor();\n\n    /**\n     * Construct the plugin class. You probably want to use `CursorPlugin.create`\n     * instead.\n     *\n     * @param {CursorPluginParams} params Plugin parameters\n     * @param {object} ws Wavesurfer instance\n     */\n    constructor(params, ws) {\n        this.wavesurfer = ws;\n        this.style = ws.util.style;\n        this.util = ws.util;\n        /**\n         * The cursor HTML element\n         *\n         * @type {?HTMLElement}\n         */\n        this.cursor = null;\n        /**\n         * displays the time next to the cursor\n         *\n         * @type {?HTMLElement}\n         */\n        this.showTime = null;\n        /**\n         * The html container that will display the time\n         *\n         * @type {?HTMLElement}\n         */\n        this.displayTime = null;\n        /**\n         * true if call destory before ready event\n         * @type {boolean}\n         */\n        this.isDestroyCalled = false;\n\n        this.params = Object.assign({}, this.defaultParams, params);\n    }\n\n    _onReady() {\n        if (this.isDestroyCalled) {\n            return;\n        }\n        this.wrapper = this.wavesurfer.drawer.wrapper;\n        this.cursor = this.util.withOrientation(this.wrapper.appendChild(\n            document.createElement('cursor'),\n        ), this.wavesurfer.params.vertical);\n\n        this.style(this.cursor,\n            Object.assign(\n                {\n                    position: 'absolute',\n                    zIndex: this.params.zIndex,\n                    left: 0,\n                    top: 0,\n                    bottom: 0,\n                    width: '0',\n                    display: 'flex',\n                    borderRightStyle: this.params.style,\n                    borderRightWidth: this.params.width,\n                    borderRightColor: this.params.color,\n                    opacity: this.params.opacity,\n                    pointerEvents: 'none'\n                },\n                this.params.customStyle\n            )\n        );\n\n        if (this.params.showTime) {\n            this.showTime = this.util.withOrientation(this.wrapper.appendChild(\n                document.createElement('showTitle')\n            ), this.wavesurfer.params.vertical);\n            this.style(\n                this.showTime,\n                Object.assign(\n                    {\n                        position: 'absolute',\n                        zIndex: this.params.zIndex,\n                        left: 0,\n                        top: 0,\n                        bottom: 0,\n                        width: 'auto',\n                        display: 'flex',\n                        opacity: this.params.opacity,\n                        pointerEvents: 'none',\n                        height: '100%'\n                    },\n                    this.params.customStyle\n                )\n            );\n\n            this.displayTime = this.util.withOrientation(this.showTime.appendChild(\n                document.createElement('div'),\n            ), this.wavesurfer.params.vertical);\n\n            this.style(this.displayTime,\n                Object.assign(\n                    {\n                        display: 'inline',\n                        pointerEvents: 'none',\n                        margin: 'auto',\n                        visibility: 'hidden' // initial value will be hidden just for measuring purpose\n                    },\n                    this.params.customShowTimeStyle\n                )\n            );\n\n            // initial value to measure display width\n            this.displayTime.innerHTML = this.formatTime(0);\n        }\n\n        this.wrapper.addEventListener('mousemove', this._onMousemove);\n        if (this.params.hideOnBlur) {\n            // ensure elements are hidden initially\n            this.hideCursor();\n            this.wrapper.addEventListener('mouseenter', this._onMouseenter);\n            this.wrapper.addEventListener('mouseleave', this._onMouseleave);\n        }\n    }\n\n    /**\n     * Initialise the plugin (used by the Plugin API)\n     */\n    init() {\n        if (this.wavesurfer.isReady) {\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', () => this._onReady());\n        }\n    }\n\n    /**\n     * Destroy the plugin (used by the Plugin API)\n     */\n    destroy() {\n        if (!this.cursorTime || !this.showTime){\n            this.isDestroyCalled = true;\n            return;\n        }\n        if (this.params.showTime) {\n            this.showTime && this.showTime.remove();\n        }\n        this.cursor && this.cursor.remove();\n        this.wrapper.removeEventListener('mousemove', this._onMousemove);\n        if (this.params.hideOnBlur) {\n            this.wrapper.removeEventListener('mouseenter', this._onMouseenter);\n            this.wrapper.removeEventListener('mouseleave', this._onMouseleave);\n        }\n    }\n\n    /**\n     * Update the cursor position\n     *\n     * @param {number} xpos The x offset of the cursor in pixels\n     * @param {number} ypos The y offset of the cursor in pixels\n     * @param {boolean} flip Flag to flip duration text from right to left\n     */\n    updateCursorPosition(xpos, ypos, flip = false) {\n        this.style(this.cursor, {\n            left: `${xpos}px`\n        });\n        if (this.params.showTime) {\n            const duration = this.wavesurfer.getDuration();\n            const elementWidth =\n                this.wavesurfer.drawer.width /\n                this.wavesurfer.params.pixelRatio;\n            const scrollWidth = this.wavesurfer.drawer.getScrollX();\n\n            const scrollTime =\n                (duration / this.wavesurfer.drawer.width) * scrollWidth;\n\n            const timeValue =\n                Math.max(0, ((xpos - this.wrapper.scrollLeft) / elementWidth) * duration) + scrollTime;\n            const formatValue = this.formatTime(timeValue);\n            if (flip) {\n                const textOffset = this.displayTime.getBoundingClientRect().width;\n                xpos -= textOffset;\n            }\n            this.style(this.showTime, {\n                left: `${xpos}px`,\n                top: `${ypos}px`\n            });\n            this.style(this.displayTime, {\n                visibility: 'visible'\n            });\n            this.displayTime.innerHTML = `${formatValue}`;\n        }\n    }\n\n    /**\n     * Show the cursor\n     */\n    showCursor() {\n        this.style(this.cursor, {\n            display: 'flex'\n        });\n        if (this.params.showTime) {\n            this.style(this.showTime, {\n                display: 'flex'\n            });\n        }\n    }\n\n    /**\n     * Hide the cursor\n     */\n    hideCursor() {\n        this.style(this.cursor, {\n            display: 'none'\n        });\n        if (this.params.showTime) {\n            this.style(this.showTime, {\n                display: 'none'\n            });\n        }\n    }\n\n    /**\n     * Format the timestamp for `cursorTime`.\n     *\n     * @param {number} cursorTime Time in seconds\n     * @returns {string} Formatted timestamp\n     */\n    formatTime(cursorTime) {\n        cursorTime = isNaN(cursorTime) ? 0 : cursorTime;\n        if (this.params.formatTimeCallback) {\n            return this.params.formatTimeCallback(cursorTime);\n        }\n        return [cursorTime].map(time =>\n            [\n                Math.floor((time % 3600) / 60), // minutes\n                ('00' + Math.floor(time % 60)).slice(-2), // seconds\n                ('000' + Math.floor((time % 1) * 1000)).slice(-3) // milliseconds\n            ].join(':')\n        );\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/plugin/cursor/index.js\");\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}