{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-096ae504\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"appContainer\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"firstPageContainer\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"firstPageContainer\"\n};\nconst _hoisted_4 = {\n  id: \"my-player1\",\n  class: \"video-js1\",\n  controls: \"\",\n  \"data-setup\": \"{}\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"transcriptCon\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"transcriptTip\"\n}, \"Transcript:\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 2,\n  class: \"pageContainer\"\n};\nconst _hoisted_9 = {\n  class: \"modifiedCon\"\n};\nconst _hoisted_10 = {\n  class: \"modifiedTopContainer\"\n};\nconst _hoisted_11 = {\n  class: \"previewContainer\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"previewTop\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topTip\"\n}, \"Preview\"), /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topDescribe\"\n}, \" Click \\\"generate\\\" button to preview changes. \")], -1 /* HOISTED */));\nconst _hoisted_13 = {\n  id: \"modifiedContainer\"\n};\nconst _hoisted_14 = {\n  id: \"modified-my-player\",\n  class: \"video-js vjs-big-play-centered\",\n  controls: \"\"\n};\nconst _hoisted_15 = [\"src\"];\nconst _hoisted_16 = {\n  key: 0,\n  class: \"modifiedWaveform\"\n};\nconst _hoisted_17 = {\n  id: \"modifiedWaveTimeline\",\n  ref: \"modifiedWaveTimeline\"\n};\nconst _hoisted_18 = {\n  class: \"displayTimeContainer\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topDescribe\"\n}, [/*#__PURE__*/_createTextVNode(\" Drag & drop \"), /*#__PURE__*/_createElementVNode(\"span\", null, \"Time\"), /*#__PURE__*/_createTextVNode(\" onto word to get word start and end times \")], -1 /* HOISTED */));\nconst _hoisted_20 = {\n  class: \"textContent\"\n};\nconst _hoisted_21 = [\"onMouseenter\", \"onMouseleave\", \"onClick\", \"id\"];\nconst _hoisted_22 = {\n  class: \"methodsContainer\"\n};\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"methodsTop\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topTip\"\n}, \"Modify Methods\"), /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topDescribe\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Drag & drop\"), /*#__PURE__*/_createTextVNode(\" methods onto word to take effect \")])], -1 /* HOISTED */));\nconst _hoisted_24 = {\n  class: \"methodContainer\"\n};\nconst _hoisted_25 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modalityMethod\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Text Modality\")], -1 /* HOISTED */));\nconst _hoisted_26 = {\n  class: \"methodState\"\n};\nconst _hoisted_27 = {\n  class: \"methodState\"\n};\nconst _hoisted_28 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"topDescribe\"\n}, \" Fill in the form and click the Add button \", -1 /* HOISTED */));\nconst _hoisted_29 = {\n  key: 3,\n  class: \"pageContainer\",\n  style: {\n    \"position\": \"relative\"\n  }\n};\nconst _hoisted_30 = {\n  key: 4,\n  class: \"pageContainer\"\n};\nconst _hoisted_31 = {\n  style: {\n    position: 'absolute'\n  },\n  class: \"popupContainer\"\n};\nconst _hoisted_32 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Video\", -1 /* HOISTED */));\nconst _hoisted_33 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Audio\", -1 /* HOISTED */));\nconst _hoisted_34 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Text\", -1 /* HOISTED */));\nconst _hoisted_35 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Blank\", -1 /* HOISTED */));\nconst _hoisted_36 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Gblur\", -1 /* HOISTED */));\nconst _hoisted_37 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Mute\", -1 /* HOISTED */));\nconst _hoisted_38 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Replace\", -1 /* HOISTED */));\nconst _hoisted_39 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Remove\", -1 /* HOISTED */));\nconst _hoisted_40 = {\n  style: {\n    top: -30 + 'px',\n    left: 280 + 'px',\n    position: 'relative'\n  },\n  class: \"popupContainer\"\n};\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"display\": \"block\",\n    \"width\": \"70px\"\n  }\n}, \"Low\", -1 /* HOISTED */));\nconst _hoisted_42 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"display\": \"block\",\n    \"width\": \"70px\"\n  }\n}, \"Medium\", -1 /* HOISTED */));\nconst _hoisted_43 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"display\": \"block\",\n    \"width\": \"70px\"\n  }\n}, \"High\", -1 /* HOISTED */));\nconst _hoisted_44 = {\n  class: \"dialogReplaceTextContainer\"\n};\nconst _hoisted_45 = {\n  class: \"dialogReplaceItem\"\n};\nconst _hoisted_46 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"dialogReplaceTitle\"\n}, \"Word:\", -1 /* HOISTED */));\nconst _hoisted_47 = {\n  class: \"dialogReplaceItem\"\n};\nconst _hoisted_48 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"dialogReplaceTitle\"\n}, \"Alternate:\", -1 /* HOISTED */));\nconst _hoisted_49 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache) {\n  const _component_StepProcess = _resolveComponent(\"StepProcess\");\n  const _component_UploadVideo = _resolveComponent(\"UploadVideo\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_AddNoise = _resolveComponent(\"AddNoise\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_TableModified = _resolveComponent(\"TableModified\");\n  const _component_select_method = _resolveComponent(\"select-method\");\n  const _component_view_result = _resolveComponent(\"view-result\");\n  const _component_ArrowRight = _resolveComponent(\"ArrowRight\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_StepProcess, {\n    activeStep: _ctx.activeStep\n  }, null, 8 /* PROPS */, [\"activeStep\"]), _ctx.activeStep === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_UploadVideo, {\n    onTransmitMp4: _cache[0] || (_cache[0] = $event => _ctx.currentFile = $event)\n  }), _createVNode(_component_el_button, {\n    class: \"aligned elButton nextbutton\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.nextButton(1)),\n    size: \"small\",\n    type: \"primary\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Next\")]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), _ctx.activeStep === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"video\", _hoisted_4, [_createElementVNode(\"source\", {\n    src: _ctx.McurrentVideoUrl,\n    type: \"video/mp4\"\n  }, null, 8 /* PROPS */, _hoisted_5)]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createVNode(_component_el_input, {\n    type: \"textarea\",\n    rows: 2,\n    placeholder: \"Please enter\",\n    modelValue: _ctx.textarea,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.textarea = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", null, [_createVNode(_component_el_button, {\n    class: \"aligned elButton nextbutton\",\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.nextButton(2)),\n    size: \"small\",\n    type: \"primary\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Next\")]),\n    _: 1 /* STABLE */\n  })])])) : _ctx.activeStep === 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"video\", _hoisted_14, [_createElementVNode(\"source\", {\n    src: _ctx.McurrentVideoUrl,\n    type: \"video/mp4\"\n  }, null, 8 /* PROPS */, _hoisted_15)])]), _ctx.modifiedWaveformSwitch ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, null, 512 /* NEED_PATCH */), _createElementVNode(\"div\", {\n    id: \"modifiedWaveform\",\n    ref: \"modifiedWaveform\",\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.seekToTime(null)),\n    onContextmenu: _cache[5] || (_cache[5] = _withModifiers($event => _ctx.rightClickItem($event, 'wave'), [\"prevent\"])),\n    onMouseover: _cache[6] || (_cache[6] = $event => _ctx.OperationMethod.waveOver($event, 'rgba(255, 228, 196, 0.5)', 'rgba(255, 228, 196, 0.5)', _ctx.rightPopup)),\n    onMouseout: _cache[7] || (_cache[7] = $event => _ctx.OperationMethod.waveOver($event, 'rgba(181, 198, 241, 0.2)', '#fff', _ctx.rightPopup))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_18, [_hoisted_19, _createVNode(_component_el_form_item, {\n    style: {\n      \"margin-top\": \"10px\"\n    }\n  }, {\n    label: _withCtx(() => [_createElementVNode(\"span\", {\n      draggable: \"true\",\n      onDragend: _cache[8] || (_cache[8] = $event => _ctx.dragGetTime($event))\n    }, \"Time\", 32 /* HYDRATE_EVENTS */)]),\n\n    default: _withCtx(() => [_createVNode(_component_el_input, {\n      modelValue: _ctx.currentNoiseItem.text,\n      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => _ctx.currentNoiseItem.text = $event),\n      placeholder: \"Text\",\n      class: \"textTimeInput\",\n      readonly: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createTextVNode(\" - \"), _createVNode(_component_el_input, {\n      modelValue: _ctx.currentNoiseItem.start,\n      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => _ctx.currentNoiseItem.start = $event),\n      placeholder: \"Start time\",\n      class: \"startTimeInput\",\n      readonly: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createTextVNode(\" - \"), _createVNode(_component_el_input, {\n      modelValue: _ctx.currentNoiseItem.end,\n      \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => _ctx.currentNoiseItem.end = $event),\n      placeholder: \"End time\",\n      class: \"endTimeInput\",\n      readonly: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_20, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.modifiedTextList, (textitem, index) => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      onMouseenter: $event => _ctx.textOver($event, index, 'rgba(255, 228, 196, 0.5)', 'rgba(255, 228, 196, 0.5)'),\n      onMouseleave: $event => _ctx.textOver($event, index, 'rgba(181, 198, 241, 0.2)', '#fff'),\n      onContextmenu: _cache[12] || (_cache[12] = _withModifiers($event => _ctx.rightClickItem($event, 'text'), [\"prevent\"])),\n      onDragover: _cache[13] || (_cache[13] = $event => ($event.preventDefault(), $event.dataTransfer.dropEffect = 'move')),\n      onClick: $event => _ctx.seekToTime(textitem.start),\n      key: textitem,\n      id: index\n    }, _toDisplayString(textitem.text), 41 /* TEXT, PROPS, HYDRATE_EVENTS */, _hoisted_21);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _createVNode(_component_el_card, {\n    shadow: \"always\",\n    class: \"methodContent\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_24, [_hoisted_25, _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"span\", {\n      draggable: \"true\",\n      onDragend: _cache[14] || (_cache[14] = $event => _ctx.dragEnd($event, 't', 'replace', 'off'))\n    }, \"Replace\", 32 /* HYDRATE_EVENTS */)]), _createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"span\", {\n      draggable: \"true\",\n      onDragend: _cache[15] || (_cache[15] = $event => _ctx.dragEnd($event, 't', 'remove', ''))\n    }, \"Remove\", 32 /* HYDRATE_EVENTS */)])])]),\n\n    _: 1 /* STABLE */\n  }), _hoisted_28, _createVNode(_component_AddNoise, {\n    onAddNoise: _ctx.addNoise\n  }, null, 8 /* PROPS */, [\"onAddNoise\"])])]), _createVNode(_component_el_checkbox, {\n    modelValue: _ctx.asrNosie,\n    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = $event => _ctx.asrNosie = $event),\n    label: \"If selected, the constructed audio noise will interfere with the text.\",\n    class: \"asrCheckbox\",\n    size: \"large\"\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    class: \"aligned elButton generate\",\n    onClick: _ctx.generate,\n    type: \"danger\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Generate\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n    class: \"aligned elButton nextbutton\",\n    type: _ctx.McurrentVideoUrl == _ctx.currentVideoUrl ? 'info' : 'primary',\n    onClick: _cache[17] || (_cache[17] = $event => _ctx.nextButton(3))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Next\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"type\"]), _createVNode(_component_el_divider), _createVNode(_component_TableModified, {\n    editAligned: _ctx.editAligned,\n    onDeleteNoise: _ctx.deleteNoise\n  }, null, 8 /* PROPS */, [\"editAligned\", \"onDeleteNoise\"])])])) : _ctx.activeStep === 3 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createVNode(_component_select_method, {\n    class: \"selectMethod\",\n    onTransmitMethods: _cache[18] || (_cache[18] = $event => _ctx.methodList = $event)\n  }), _createVNode(_component_el_button, {\n    class: \"aligned elButton nextbutton\",\n    style: {\n      \"margintop\": \"60px\"\n    },\n    onClick: _cache[19] || (_cache[19] = $event => _ctx.nextButton(4)),\n    type: \"primary\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Next\")]),\n    _: 1 /* STABLE */\n  })])) : _ctx.activeStep === 4 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createVNode(_component_view_result, {\n    textList: _ctx.modifiedTextList,\n    videoUrl: _ctx.McurrentVideoUrl,\n    defenceVideoUrl: _ctx.defenceVideoUrl,\n    originalVideoUrl: _ctx.currentVideoUrl,\n    duration: _ctx.duration,\n    editAligned: _ctx.editAligned,\n    viewResults: _ctx.viewResults,\n    methodData: _ctx.methodData\n  }, null, 8 /* PROPS */, [\"textList\", \"videoUrl\", \"defenceVideoUrl\", \"originalVideoUrl\", \"duration\", \"editAligned\", \"viewResults\", \"methodData\"])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n    id: \"popup\",\n    style: _normalizeStyle({\n      top: _ctx.showPositionTop + 'px',\n      left: _ctx.showPositionLeft + 'px',\n      position: 'absolute'\n    }),\n    onMouseleave: _cache[34] || (_cache[34] = $event => (_ctx.modalityDisplay.audio = false, _ctx.modalityDisplay.gblur = false, _ctx.modalityDisplay.video = false, _ctx.modalityDisplay.text = false))\n  }, [_withDirectives(_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"div\", {\n    class: \"modality\",\n    onMouseover: _cache[20] || (_cache[20] = $event => (_ctx.modalityDisplay.audio = false, _ctx.modalityDisplay.gblur = false, _ctx.modalityDisplay.video = true, _ctx.modalityDisplay.text = false))\n  }, [_hoisted_32, _createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_ArrowRight)]),\n    _: 1 /* STABLE */\n  })], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"div\", {\n    class: \"modality\",\n    onMouseover: _cache[21] || (_cache[21] = $event => (_ctx.modalityDisplay.audio = true, _ctx.modalityDisplay.gblur = false, _ctx.modalityDisplay.video = false, _ctx.modalityDisplay.text = false))\n  }, [_hoisted_33, _createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_ArrowRight)]),\n    _: 1 /* STABLE */\n  })], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"div\", {\n    class: \"modality\",\n    onMouseover: _cache[22] || (_cache[22] = $event => (_ctx.modalityDisplay.audio = false, _ctx.modalityDisplay.gblur = false, _ctx.modalityDisplay.video = false, _ctx.modalityDisplay.text = true))\n  }, [_hoisted_34, _createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_ArrowRight)]),\n    _: 1 /* STABLE */\n  })], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"div\", {\n    class: \"modalityClose\",\n    onClick: _cache[23] || (_cache[23] = $event => _ctx.modalityModify('clear', 'all')),\n    onMouseover: _cache[24] || (_cache[24] = $event => (_ctx.modalityDisplay.audio = false, _ctx.modalityDisplay.gblur = false, _ctx.modalityDisplay.video = false, _ctx.modalityDisplay.text = false))\n  }, \" Clear \", 32 /* HYDRATE_EVENTS */)], 512 /* NEED_PATCH */), [[_vShow, _ctx.rightPopup]]), _withDirectives(_createElementVNode(\"div\", {\n    style: _normalizeStyle({\n      top: (_ctx.modalityDisplay.audio ? 50 : 0) + (_ctx.modalityDisplay.video ? 10 : 0) + (_ctx.modalityDisplay.text ? 90 : 0) + 'px',\n      left: 140 + 'px',\n      position: 'relative'\n    }),\n    class: \"popupContainer\"\n  }, [_withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", {\n    class: \"state\",\n    onMouseover: _cache[25] || (_cache[25] = $event => _ctx.modalityDisplay.gblur = false),\n    onClick: _cache[26] || (_cache[26] = $event => _ctx.modalityModify('blank', 'v'))\n  }, [_hoisted_35, _createVNode(_component_el_icon)], 32 /* HYDRATE_EVENTS */), _createElementVNode(\"div\", {\n    class: \"state\",\n    onMouseover: _cache[27] || (_cache[27] = $event => _ctx.modalityDisplay.gblur = true)\n  }, [_hoisted_36, _createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_ArrowRight)]),\n    _: 1 /* STABLE */\n  })], 32 /* HYDRATE_EVENTS */)], 512 /* NEED_PATCH */), [[_vShow, _ctx.modalityDisplay.video]]), _withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[28] || (_cache[28] = $event => _ctx.modalityModify('mute', 'a'))\n  }, [_hoisted_37, _createVNode(_component_el_icon)])], 512 /* NEED_PATCH */), [[_vShow, _ctx.modalityDisplay.audio]]), _withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[29] || (_cache[29] = $event => _ctx.modalityModify('replace', 't'))\n  }, [_hoisted_38, _createVNode(_component_el_icon)]), _createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[30] || (_cache[30] = $event => _ctx.modalityModify('remove', 't'))\n  }, [_hoisted_39, _createVNode(_component_el_icon)])], 512 /* NEED_PATCH */), [[_vShow, _ctx.modalityDisplay.text]])], 4 /* STYLE */), [[_vShow, _ctx.rightPopup && (_ctx.modalityDisplay.video || _ctx.modalityDisplay.audio || _ctx.modalityDisplay.text)]]), _withDirectives(_createElementVNode(\"div\", _hoisted_40, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[31] || (_cache[31] = $event => _ctx.modalityModify('gblur', 'v', 5))\n  }, [_hoisted_41, _createVNode(_component_el_icon)]), _createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[32] || (_cache[32] = $event => _ctx.modalityModify('gblur', 'v', 10))\n  }, [_hoisted_42, _createVNode(_component_el_icon)]), _createElementVNode(\"div\", {\n    class: \"state\",\n    onClick: _cache[33] || (_cache[33] = $event => _ctx.modalityModify('gblur', 'v', 20))\n  }, [_hoisted_43, _createVNode(_component_el_icon)])])], 512 /* NEED_PATCH */), [[_vShow, _ctx.rightPopup && _ctx.modalityDisplay.gblur]])], 36 /* STYLE, HYDRATE_EVENTS */), _createVNode(_component_el_dialog, {\n    modelValue: _ctx.dialogReplaceText,\n    \"onUpdate:modelValue\": _cache[37] || (_cache[37] = $event => _ctx.dialogReplaceText = $event),\n    title: \"Text replacement\",\n    width: \"30%\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_49, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _ctx.dialogConfirm\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Confirm\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_44, [_createElementVNode(\"div\", _hoisted_45, [_hoisted_46, _createVNode(_component_el_input, {\n      readonly: \"\",\n      modelValue: _ctx.dialogReplaceTitle,\n      \"onUpdate:modelValue\": _cache[35] || (_cache[35] = $event => _ctx.dialogReplaceTitle = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_47, [_hoisted_48, _createVNode(_component_el_input, {\n      modelValue: _ctx.alternateText,\n      \"onUpdate:modelValue\": _cache[36] || (_cache[36] = $event => _ctx.alternateText = $event),\n      placeholder: \"Please input\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","id","controls","_createElementVNode","ref","style","position","top","left","_createElementBlock","_hoisted_1","_createVNode","_component_StepProcess","activeStep","_ctx","_hoisted_2","_component_UploadVideo","onTransmitMp4","$event","_component_el_button","onClick","size","type","_hoisted_3","_hoisted_4","src","_hoisted_6","_hoisted_7","_component_el_input","rows","placeholder","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","onContextmenu","onMouseover","waveOver","onMouseout","_hoisted_18","_hoisted_19","_component_el_form_item","label","draggable","onDragend","text","readonly","start","end","_hoisted_20","_Fragment","textitem","index","onMouseenter","onMouseleave","onDragover","preventDefault","dataTransfer","dropEffect","key","_hoisted_22","_hoisted_23","_component_el_card","shadow","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_component_AddNoise","onAddNoise","_component_el_checkbox","_component_el_divider","_component_TableModified","editAligned","onDeleteNoise","_hoisted_29","_component_select_method","onTransmitMethods","_hoisted_30","_component_view_result","textList","videoUrl","defenceVideoUrl","originalVideoUrl","duration","viewResults","methodData","audio","gblur","video","_hoisted_31","_hoisted_32","_component_el_icon","_component_ArrowRight","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_component_el_dialog","title","width","footer","_hoisted_49","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48"],"sourceRoot":"","sources":["/home/zhangbaozheng/emotional/Robust-MSA/vue3/src/views/VideoEditor.vue"],"sourcesContent":["<template>\n  <div class=\"appContainer\">\n    <StepProcess :activeStep=\"activeStep\" />\n    <div class=\"firstPageContainer\" v-if=\"activeStep === 0\">\n      <UploadVideo @transmitMp4=\"currentFile = $event\" />\n      <el-button\n        class=\"aligned elButton nextbutton\"\n        @click=\"nextButton(1)\"\n        size=\"small\"\n        type=\"primary\"\n        >Next</el-button\n      >\n    </div>\n    <div class=\"firstPageContainer\" v-if=\"activeStep === 1\">\n      <video id=\"my-player1\" class=\"video-js1\" controls data-setup=\"{}\">\n        <source :src=\"McurrentVideoUrl\" type=\"video/mp4\" />\n      </video>\n      <div class=\"transcriptCon\">\n        <div class=\"transcriptTip\">Transcript:</div>\n        <el-input\n          type=\"textarea\"\n          :rows=\"2\"\n          placeholder=\"Please enter\"\n          v-model=\"textarea\"\n        ></el-input>\n      </div>\n      <div>\n        <el-button\n          class=\"aligned elButton nextbutton\"\n          @click=\"nextButton(2)\"\n          size=\"small\"\n          type=\"primary\"\n          >Next</el-button\n        >\n      </div>\n    </div>\n    <div class=\"pageContainer\" v-else-if=\"activeStep === 2\">\n      <div class=\"modifiedCon\">\n        <div class=\"modifiedTopContainer\">\n          <div class=\"previewContainer\">\n            <div class=\"previewTop\">\n              <div class=\"topTip\">Preview</div>\n              <div class=\"topDescribe\">\n                Click \"generate\" button to preview changes.\n              </div>\n            </div>\n            <div id=\"modifiedContainer\">\n              <video\n                id=\"modified-my-player\"\n                class=\"video-js vjs-big-play-centered\"\n                controls\n              >\n                <source :src=\"McurrentVideoUrl\" type=\"video/mp4\" />\n              </video>\n            </div>\n            <div class=\"modifiedWaveform\" v-if=\"modifiedWaveformSwitch\">\n              <div id=\"modifiedWaveTimeline\" ref=\"modifiedWaveTimeline\"></div>\n              <div\n                id=\"modifiedWaveform\"\n                ref=\"modifiedWaveform\"\n                @click=\"seekToTime(null)\"\n                @contextmenu.prevent=\"rightClickItem($event, 'wave')\"\n                @mouseover=\"\n                  OperationMethod.waveOver(\n                    $event,\n                    'rgba(255, 228, 196, 0.5)',\n                    'rgba(255, 228, 196, 0.5)',\n                    rightPopup\n                  )\n                \"\n                @mouseout=\"\n                  OperationMethod.waveOver(\n                    $event,\n                    'rgba(181, 198, 241, 0.2)',\n                    '#fff',\n                    rightPopup\n                  )\n                \"\n              ></div>\n            </div>\n            <div class=\"displayTimeContainer\">\n              <div class=\"topDescribe\">\n                Drag & drop <span>Time</span> onto word to get word start and\n                end times\n              </div>\n              <el-form-item style=\"margin-top: 10px\">\n                <template #label>\n                  <span draggable=\"true\" @dragend=\"dragGetTime($event)\"\n                    >Time</span\n                  >\n                </template>\n                <el-input\n                  v-model=\"currentNoiseItem.text\"\n                  placeholder=\"Text\"\n                  class=\"textTimeInput\"\n                  readonly\n                />\n                -\n                <el-input\n                  v-model=\"currentNoiseItem.start\"\n                  placeholder=\"Start time\"\n                  class=\"startTimeInput\"\n                  readonly\n                />\n                -\n                <el-input\n                  v-model=\"currentNoiseItem.end\"\n                  placeholder=\"End time\"\n                  class=\"endTimeInput\"\n                  readonly\n                />\n              </el-form-item>\n            </div>\n\n            <div class=\"textContent\">\n              <span\n                @mouseenter=\"\n                  textOver(\n                    $event,\n                    index,\n                    'rgba(255, 228, 196, 0.5)',\n                    'rgba(255, 228, 196, 0.5)'\n                  )\n                \"\n                @mouseleave=\"\n                  textOver($event, index, 'rgba(181, 198, 241, 0.2)', '#fff')\n                \"\n                @contextmenu.prevent=\"rightClickItem($event, 'text')\"\n                @dragover=\"\n                  $event.preventDefault(),\n                    ($event.dataTransfer.dropEffect = 'move')\n                \"\n                @click=\"seekToTime(textitem.start)\"\n                v-for=\"(textitem, index) in modifiedTextList\"\n                :key=\"textitem\"\n                :id=\"index\"\n                >{{ textitem.text }}</span\n              >\n            </div>\n          </div>\n          <div class=\"methodsContainer\">\n            <div class=\"methodsTop\">\n              <div class=\"topTip\">Modify Methods</div>\n              <div class=\"topDescribe\">\n                <span>Drag & drop</span> methods onto word to take effect\n              </div>\n            </div>\n            <el-card shadow=\"always\" class=\"methodContent\">\n              <div class=\"methodContainer\">\n                <div class=\"modalityMethod\">\n                  <span>Text Modality</span>\n                </div>\n                <div class=\"methodState\">\n                  <span\n                    draggable=\"true\"\n                    @dragend=\"dragEnd($event, 't', 'replace', 'off')\"\n                    >Replace</span\n                  >\n                </div>\n                <div class=\"methodState\">\n                  <span\n                    draggable=\"true\"\n                    @dragend=\"dragEnd($event, 't', 'remove', '')\"\n                    >Remove</span\n                  >\n                </div>\n              </div>\n            </el-card>\n            <div class=\"topDescribe\">\n              Fill in the form and click the Add button\n            </div>\n            <AddNoise @addNoise=\"addNoise\" />\n          </div>\n        </div>\n        <el-checkbox\n          v-model=\"asrNosie\"\n          label=\"If selected, the constructed audio noise will interfere with the text.\"\n          class=\"asrCheckbox\"\n          size=\"large\"\n        />\n        <el-button\n          class=\"aligned elButton generate\"\n          @click=\"generate\"\n          type=\"danger\"\n          >Generate</el-button\n        >\n        <el-button\n          class=\"aligned elButton nextbutton\"\n          :type=\"McurrentVideoUrl == currentVideoUrl ? 'info' : 'primary'\"\n          @click=\"nextButton(3)\"\n          >Next</el-button\n        >\n        <el-divider />\n        <TableModified :editAligned=\"editAligned\" @deleteNoise=\"deleteNoise\" />\n      </div>\n    </div>\n    <div\n      class=\"pageContainer\"\n      style=\"position: relative\"\n      v-else-if=\"activeStep === 3\"\n    >\n      <select-method\n        class=\"selectMethod\"\n        @transmitMethods=\"methodList = $event\"\n      />\n      <el-button\n        class=\"aligned elButton nextbutton\"\n        style=\"margintop: 60px\"\n        @click=\"nextButton(4)\"\n        type=\"primary\"\n        >Next</el-button\n      >\n    </div>\n    <div class=\"pageContainer\" v-else-if=\"activeStep === 4\">\n      <view-result\n        :textList=\"modifiedTextList\"\n        :videoUrl=\"McurrentVideoUrl\"\n        :defenceVideoUrl=\"defenceVideoUrl\"\n        :originalVideoUrl=\"currentVideoUrl\"\n        :duration=\"duration\"\n        :editAligned=\"editAligned\"\n        :viewResults=\"viewResults\"\n        :methodData=\"methodData\"\n      />\n    </div>\n    <div\n      id=\"popup\"\n      :style=\"{\n        top: showPositionTop + 'px',\n        left: showPositionLeft + 'px',\n        position: 'absolute',\n      }\"\n      @mouseleave=\"\n        (modalityDisplay.audio = false),\n          (modalityDisplay.gblur = false),\n          (modalityDisplay.video = false),\n          (modalityDisplay.text = false)\n      \"\n    >\n      <div\n        v-show=\"rightPopup\"\n        :style=\"{ position: 'absolute' }\"\n        class=\"popupContainer\"\n      >\n        <div\n          class=\"modality\"\n          @mouseover=\"\n            (modalityDisplay.audio = false),\n              (modalityDisplay.gblur = false),\n              (modalityDisplay.video = true),\n              (modalityDisplay.text = false)\n          \"\n        >\n          <span>Video</span>\n          <el-icon>\n            <ArrowRight />\n          </el-icon>\n        </div>\n        <div\n          class=\"modality\"\n          @mouseover=\"\n            (modalityDisplay.audio = true),\n              (modalityDisplay.gblur = false),\n              (modalityDisplay.video = false),\n              (modalityDisplay.text = false)\n          \"\n        >\n          <span>Audio</span>\n          <el-icon>\n            <ArrowRight />\n          </el-icon>\n        </div>\n        <div\n          class=\"modality\"\n          @mouseover=\"\n            (modalityDisplay.audio = false),\n              (modalityDisplay.gblur = false),\n              (modalityDisplay.video = false),\n              (modalityDisplay.text = true)\n          \"\n        >\n          <span>Text</span>\n          <el-icon>\n            <ArrowRight />\n          </el-icon>\n        </div>\n        <div\n          class=\"modalityClose\"\n          @click=\"modalityModify('clear', 'all')\"\n          @mouseover=\"\n            (modalityDisplay.audio = false),\n              (modalityDisplay.gblur = false),\n              (modalityDisplay.video = false),\n              (modalityDisplay.text = false)\n          \"\n        >\n          Clear\n        </div>\n      </div>\n      <div\n        v-show=\"\n          rightPopup &&\n          (modalityDisplay.video ||\n            modalityDisplay.audio ||\n            modalityDisplay.text)\n        \"\n        :style=\"{\n          top:\n            (modalityDisplay.audio ? 50 : 0) +\n            (modalityDisplay.video ? 10 : 0) +\n            (modalityDisplay.text ? 90 : 0) +\n            'px',\n          left: 140 + 'px',\n          position: 'relative',\n        }\"\n        class=\"popupContainer\"\n      >\n        <div v-show=\"modalityDisplay.video\">\n          <div\n            class=\"state\"\n            @mouseover=\"modalityDisplay.gblur = false\"\n            @click=\"modalityModify('blank', 'v')\"\n          >\n            <span>Blank</span>\n            <el-icon></el-icon>\n          </div>\n          <div class=\"state\" @mouseover=\"modalityDisplay.gblur = true\">\n            <span>Gblur</span>\n            <el-icon>\n              <ArrowRight />\n            </el-icon>\n          </div>\n        </div>\n        <div v-show=\"modalityDisplay.audio\">\n          <div class=\"state\" @click=\"modalityModify('mute', 'a')\">\n            <span>Mute</span>\n            <el-icon></el-icon>\n          </div>\n        </div>\n        <div v-show=\"modalityDisplay.text\">\n          <div class=\"state\" @click=\"modalityModify('replace', 't')\">\n            <span>Replace</span>\n            <el-icon></el-icon>\n          </div>\n          <div class=\"state\" @click=\"modalityModify('remove', 't')\">\n            <span>Remove</span>\n            <el-icon></el-icon>\n          </div>\n        </div>\n      </div>\n      <div\n        v-show=\"rightPopup && modalityDisplay.gblur\"\n        :style=\"{ top: -30 + 'px', left: 280 + 'px', position: 'relative' }\"\n        class=\"popupContainer\"\n      >\n        <div>\n          <div class=\"state\" @click=\"modalityModify('gblur', 'v', 5)\">\n            <span style=\"display: block; width: 70px\">Low</span>\n            <el-icon></el-icon>\n          </div>\n          <div class=\"state\" @click=\"modalityModify('gblur', 'v', 10)\">\n            <span style=\"display: block; width: 70px\">Medium</span>\n            <el-icon></el-icon>\n          </div>\n          <div class=\"state\" @click=\"modalityModify('gblur', 'v', 20)\">\n            <span style=\"display: block; width: 70px\">High</span>\n            <el-icon></el-icon>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog v-model=\"dialogReplaceText\" title=\"Text replacement\" width=\"30%\">\n      <div class=\"dialogReplaceTextContainer\">\n        <div class=\"dialogReplaceItem\">\n          <div class=\"dialogReplaceTitle\">Word:</div>\n          <el-input readonly v-model=\"dialogReplaceTitle\" />\n        </div>\n        <div class=\"dialogReplaceItem\">\n          <div class=\"dialogReplaceTitle\">Alternate:</div>\n          <el-input v-model=\"alternateText\" placeholder=\"Please input\" />\n        </div>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"dialogConfirm\">Confirm</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watchEffect, computed, onMounted } from \"vue\";\nimport StepProcess from \"@/components/StepProcess.vue\";\nimport UploadVideo from \"@/components/UploadVideo.vue\";\nimport TableModified from \"@/components/TableModified.vue\";\nimport SelectMethod from \"@/components/SelectMethod.vue\";\nimport ViewResult from \"@/components/ViewResult.vue\";\nimport AddNoise from \"@/components/AddNoise.vue\";\nimport { uploadTranscript } from \"@/api/upload\";\nimport OperationMethod from \"@/utils/operation.js\";\nimport { callASR } from \"@/api/detection\";\nimport { videoEditAligned, getFileFromUrl } from \"@/api/modify\";\nimport { ElLoading, ElMessage } from \"element-plus\";\nimport { runMSAAligned } from \"@/api/detection\";\nconst currentFile = ref(\"\");\nconst McurrentFile = ref(\"\");\nconst currentVideoUrl = ref(\"\");\nconst McurrentVideoUrl = ref(\"\");\nconst activeStep = ref(2);\nconst modifiedVideoTime = ref(0);\nconst modifiedWavesurfer = ref(null);\nconst duration = ref(0);\nconst originalID = ref(\"\");\nconst originalPath = ref(\"\");\nconst textarea = ref(\"\");\nconst showPositionTop = ref(0);\nconst showPositionLeft = ref(0);\nconst dialogReplaceTitle = ref(\"\");\nconst alternateText = ref(\"\");\nconst rightPopup = ref(false);\nconst editAlignedIndex = ref(-1);\nconst currentNoiseItem = ref({\n  start: \"\",\n  end: \"\",\n  text: \"\",\n});\nconst methodList = ref({\n  defence: [],\n  models: [\"MMIN\", \"TFR_Net\", \"T2FN\", \"TPFN\"],\n});\nconst modalityDisplay = ref({\n  video: false,\n  audio: false,\n  text: false,\n  gblur: false,\n  clear: false,\n});\nconst modifiedPlayer = ref(null);\nconst modifiedWaveform = ref(null);\nconst dialogReplaceText = ref(false);\nconst viewResults = ref(null);\nconst methodData = ref(null);\nconst modifiedTextList = ref([\n  {\n    conf: 0.9924983864489116,\n    end: 0.25155598958333336,\n    start: 0.05031119791666667,\n    text: \"now\",\n  },\n  {\n    conf: 0.7846563020477458,\n    end: 0.4729252604166667,\n    start: 0.25155598958333336,\n    text: \"the\",\n  },\n  {\n    conf: 0.6531528330428251,\n    end: 0.8351658854166667,\n    start: 0.4729252604166667,\n    text: \"title\",\n  },\n  {\n    conf: 0.47641091293124294,\n    end: 1.0766596354166666,\n    start: 0.8351658854166667,\n    text: \"of\",\n  },\n  {\n    conf: 0.24061251992673066,\n    end: 1.1974065104166667,\n    start: 1.0766596354166666,\n    text: \"the\",\n  },\n  {\n    conf: 0.5447095983243366,\n    end: 1.4590247395833333,\n    start: 1.1974065104166667,\n    text: \"movie\",\n  },\n  {\n    conf: 0.6084983060602999,\n    end: 1.8212653645833332,\n    start: 1.4590247395833333,\n    text: \"baseke\",\n  },\n  {\n    conf: 0.6754744243939316,\n    end: 2.0426346354166665,\n    start: 1.8212653645833332,\n    text: \"sets\",\n  },\n  {\n    conf: 0.47667267739500935,\n    end: 2.14325703125,\n    start: 2.0426346354166665,\n    text: \"it\",\n  },\n  {\n    conf: 0.6783241011170195,\n    end: 2.3646263020833334,\n    start: 2.14325703125,\n    text: \"all\",\n  },\n]);\nconst editAligned = ref([]);\nconst asrNosie = ref(false);\nconst defenceVideoUrl = ref(\"\");\nconst regions = computed(() => {\n  let dataList = [];\n  modifiedTextList.value.forEach((item) => {\n    let itemdata = {\n      start: 0,\n      end: 0,\n      attributes: {\n        label: \"\",\n      },\n      data: {\n        note: \"\",\n      },\n      loop: false,\n      drag: false,\n      resize: false,\n      color: \"rgba(181, 198, 241, 0.2)\",\n      handleStyle: false,\n    };\n    itemdata.start = item.start;\n    itemdata.end = item.end;\n    dataList.push(itemdata);\n  });\n  return dataList;\n});\nconst modifiedWaveformSwitch = ref(true);\nconst modifiedEvent = () => {\n  modifiedWavesurfer.value = OperationMethod.waveformCreate(\n    modifiedWaveform.value,\n    regions.value\n  );\n  modifiedWavesurfer.value.load(McurrentVideoUrl.value);\n};\n\nconst nextButton = async (index) => {\n  if (index == 1) {\n    if (typeof currentFile.value == \"undefined\" || currentFile.value == \"\") {\n      ElMessage({\n        message: \"Please select a file.\",\n        type: \"warning\",\n      });\n      return;\n    }\n\n    let result = await OperationMethod.uploadFile(currentFile.value);\n    if (result.code === 200) {\n      try {\n        var response = await getFileFromUrl(\n          `${result.id}/raw_video.mp4`,\n          \"raw_video.mp4\"\n        );\n        McurrentVideoUrl.value = URL.createObjectURL(response);\n      } catch (error) {\n        return;\n      }\n      originalID.value = result.id;\n      originalPath.value = result.path;\n      let ASRResult = await ASRClick(result.id);\n      if (ASRResult.code != 200) {\n        return;\n      }\n      try {\n        var response = await getFileFromUrl(\n          `${result.id}/raw_video.mp4`,\n          \"raw_video.mp4\"\n        );\n      } catch (error) {\n        return;\n      }\n      duration.value =\n        (await OperationMethod.getVideoDuration(response)) / 1000000;\n      McurrentFile.value = [response];\n    } else {\n      return;\n    }\n  } else if (index == 2) {\n    if (textarea.value) {\n      if (/\\d/.test(textarea.value)) {\n        ElMessage({\n          message: \"Please substitute numbers with text\",\n          type: \"warning\",\n        });\n        return;\n      }\n      const loading = ElLoading.service({\n        lock: true,\n        text: \"Aligning video with transcript...\",\n      });\n      try {\n        var result = await uploadTranscript({\n          videoID: originalID.value,\n          transcript: textarea.value,\n        });\n        loading.close();\n      } catch (error) {\n        loading.close();\n        return;\n      }\n      modifiedTextList.value = result.data.align;\n      currentVideoUrl.value = McurrentVideoUrl.value;\n    }\n    setTimeout(() => {\n      modifiedEvent();\n    }, 5);\n  } else if (index == 3) {\n    if (McurrentVideoUrl.value === currentVideoUrl.value) {\n      ElMessage({\n        message: \"After modifying the video, please click generate.\",\n        type: \"warning\",\n      });\n      return;\n    }\n  } else if (index == 4) {\n    if (methodList.value.models.length == 0) {\n      ElMessage({\n        message: \"Please select at least one msa model.\",\n        type: \"warning\",\n      });\n      return;\n    } else {\n      methodData.value = methodList.value;\n      methodData.value[\"videoID\"] = originalID.value;\n      const loading = ElLoading.service({\n        lock: true,\n        text: \"Processing, please wait...\",\n      });\n      try {\n        let result = await runMSAAligned(methodData.value);\n        defenceVideoUrl.value = await getFileFromUrl(\n          `${originalID.value}/defended_video.mp4`,\n          \"defended_video.mp4\"\n        );\n        defenceVideoUrl.value = URL.createObjectURL(defenceVideoUrl.value);\n        viewResults.value = result.data;\n        loading.close();\n      } catch (error) {\n        loading.close();\n        return;\n      }\n    }\n  }\n  activeStep.value++;\n};\n\nconst ASRClick = async (originalID) => {\n  const loading = ElLoading.service({\n    lock: true,\n    text: \"Speech Recognition in progress...\",\n  });\n  try {\n    const ASRResult = await callASR({ videoID: originalID });\n    textarea.value = ASRResult.data.result;\n  } catch (error) {\n    return { code: 400 };\n  } finally {\n    loading.close();\n  }\n  return { code: 200 };\n};\nconst watchVideo = (videoTime) => {\n  if (\n    videoTime > modifiedTextList.value[modifiedTextList.value.length - 1].end\n  ) {\n    OperationMethod.hightLightInit();\n    return;\n  }\n  let watchSwitch = true;\n  for (let index = 0; index < modifiedTextList.value.length; index++) {\n    if (\n      modifiedTextList.value[index].start < videoTime &&\n      videoTime <= modifiedTextList.value[index].end\n    ) {\n      OperationMethod.highlightOver(\n        index - 1,\n        \"rgba(181, 198, 241, 0.2)\",\n        \"#fff\"\n      );\n      OperationMethod.highlightOver(\n        index,\n        \"rgba(255, 228, 196, 0.5)\",\n        \"rgba(255, 228, 196, 0.5)\"\n      );\n      watchSwitch = false;\n      break;\n    }\n  }\n  if (watchSwitch) {\n    OperationMethod.hightLightInit();\n  }\n};\nconst modifiedVideoTimeEvent = (that) => {\n  let count = 10;\n  let timer = setInterval(() => {\n    modifiedVideoTime.value = that.currentTime();\n    modifiedWavesurfer.value.seekAndCenter(\n      modifiedVideoTime.value / duration.value > 1\n        ? 1\n        : modifiedVideoTime.value / duration.value\n    );\n    watchVideo(modifiedVideoTime.value);\n    count == 0 ? clearInterval(timer) : count--;\n  }, 25);\n};\nconst seekToTime = (textitem) => {\n  if (textitem == null) {\n    setTimeout(() => {\n      modifiedPlayer.value.currentTime(\n        modifiedWavesurfer.value.getCurrentTime() + 0.000001\n      );\n    }, 5);\n  } else {\n    modifiedPlayer.value.currentTime(textitem + 0.000001);\n  }\n};\nconst dragEnd = (e, type, method, lastkey) => {\n  var element = document.elementFromPoint(e.clientX, e.clientY);\n  if ($(element).parent().attr(\"class\") == \"textContent\") {\n    editAlignedIndex.value = Number($(element).attr(\"id\"));\n    let time = [\n      modifiedTextList.value[editAlignedIndex.value].start,\n      modifiedTextList.value[editAlignedIndex.value].end,\n      editAlignedIndex.value,\n    ];\n    time[0] = time[0].toFixed(4);\n    time[1] = time[1].toFixed(4);\n    editAligned.value = editAligned.value.filter((item) => {\n      return !(item[0][2] == time[2] && item[1] == type && item[2] == method);\n    });\n    let item = [time, type, method, lastkey];\n    if (method == \"replace\") {\n      dialogReplaceText.value = true;\n      dialogReplaceTitle.value =\n        modifiedTextList.value[editAlignedIndex.value].text;\n      return;\n    }\n    editAligned.value.push(item);\n  }\n};\nconst dragGetTime = (e) => {\n  var element = document.elementFromPoint(e.clientX, e.clientY);\n  if ($(element).parent().attr(\"class\") == \"textContent\") {\n    let index = Number($(element).attr(\"id\"));\n    currentNoiseItem.value = modifiedTextList.value[index];\n    currentNoiseItem.value.start = currentNoiseItem.value.start.toFixed(4);\n    currentNoiseItem.value.end = currentNoiseItem.value.end.toFixed(4);\n  }\n};\nconst deleteNoise = (index) => {\n  editAligned.value.splice(index, 1);\n};\nconst modifiedVideoPlayer = () => {\n  modifiedPlayer.value = videojs(\n    \"modified-my-player\",\n    {},\n    function onPlayerReady() {\n      this.on(\"play\", function (e) {\n        modifiedVideoTimeEvent(this);\n      });\n      this.on(\"timeupdate\", function (e) {\n        modifiedVideoTimeEvent(this);\n      });\n      this.on(\"seeked\", function () {\n        OperationMethod.hightLightInit();\n      });\n    }\n  );\n};\nwatchEffect(\n  () => {\n    if (activeStep.value == 2) {\n      let player = videojs.getPlayer(\"modified-my-player\");\n      if (player) {\n        player.dispose();\n      }\n      modifiedVideoPlayer();\n    }\n  },\n  {\n    flush: \"post\",\n  }\n);\n\nconst mouseDown = (e) => {\n  var state = true;\n  try {\n    e.path.forEach((item) => {\n      if ($(item).attr(\"id\") == \"popup\") {\n        state = false;\n      }\n    });\n  } catch (error) {\n    return;\n  }\n  if (state && modifiedTextList.value.length) {\n    rightPopup.value = false;\n    OperationMethod.hightLightInit();\n  }\n};\nconst dialogConfirm = () => {\n  dialogReplaceText.value = false;\n  rightPopup.value = false;\n  let time = [\n    modifiedTextList.value[editAlignedIndex.value].start,\n    modifiedTextList.value[editAlignedIndex.value].end,\n    editAlignedIndex.value,\n  ];\n  time[0] = item[0].toFixed(4);\n  time[1] = item[1].toFixed(4);\n  let item = [\n    time,\n    \"t\",\n    \"replace\",\n    [modifiedTextList.value[editAlignedIndex.value].text, alternateText.value],\n  ];\n  editAligned.value.push(item);\n};\nconst addNoise = (e) => {\n  editAligned.value.push(e);\n};\n\nconst textOver = async (e, index, background, textBackground) => {\n  if (!rightPopup.value) {\n    await OperationMethod.highlightOver(index, background, textBackground);\n  }\n};\n\nconst rightClickItem = async (e, type) => {\n  const element = document.getElementById(`${e.target.id}`);\n  showPositionTop.value = element.offsetTop + 80 || 0;\n  showPositionLeft.value = element.offsetLeft + element.offsetWidth + 25 || 0;\n  rightPopup.value = true;\n  await OperationMethod.hightLightInit();\n  let index = $(\n    type == \"wave\"\n      ? \"#modifiedWaveform > wave > region.wavesurfer-region\"\n      : \".pageContainer .modifiedCon .textContent span\"\n  ).index(e.target);\n  editAlignedIndex.value = index;\n  await OperationMethod.highlightOver(\n    index,\n    \"rgba(255, 228, 196, 0.5)\",\n    \"rgba(255, 228, 196, 0.5)\"\n  );\n  modalityDisplay.value.clear = false;\n  editAligned.value.forEach((item) => {\n    if (item[0] == index) {\n      modalityDisplay.value.clear = true;\n    }\n  });\n  modalityDisplay.value.clear = modalityDisplay.value.clear ? true : false;\n};\nconst generate = async () => {\n  if (editAligned.value.length == 0) {\n    ElMessage({\n      message: \"Please modify the video first.\",\n      type: \"warning\",\n    });\n    return;\n  }\n  let data = {\n    videoID: originalID.value,\n    words: editAligned.value,\n    asrNosie: asrNosie.value,\n  };\n  const loading = ElLoading.service({\n    lock: true,\n    text: \"Generating modified video...\",\n  });\n  try {\n    var result = await videoEditAligned(data);\n  } catch (error) {\n    loading.close();\n    return;\n  }\n  if (result.data.code == 200) {\n    modifiedTextList.value = result.data.align;\n    McurrentFile.value = \"\";\n    try {\n      var response = await getFileFromUrl(\n        `${originalID.value}/modified_video.mp4`,\n        \"modified_video.mp4\"\n      );\n      McurrentVideoUrl.value = URL.createObjectURL(response);\n    } catch (error) {\n      loading.close();\n      return;\n    }\n    McurrentFile.value = [response];\n    modifiedPlayer.value.dispose();\n    let html =\n      '<video id=\"modified-my-player\" class=\"video-js vjs-big-play-centered\" controls=\"true\"><source src=\"' +\n      McurrentVideoUrl.value +\n      '\" type=\"video/mp4\" /></video>';\n    document.getElementById(\"modifiedContainer\").innerHTML = html;\n    modifiedVideoPlayer();\n    modifiedWaveformSwitch.value = false;\n    setTimeout(() => {\n      modifiedWaveformSwitch.value = true;\n      setTimeout(() => {\n        modifiedEvent();\n      }, 2);\n    }, 2);\n    editAligned.value.forEach((item) => {\n      if (item[1] == \"t\") {\n        if (item[2] == \"replace\") {\n          modifiedTextList.value[item[0]].text = item[3];\n        } else {\n          modifiedTextList.value[item[0]].text = \"REMOVED\";\n        }\n      }\n    });\n    loading.close();\n  }\n};\nconst modalityModify = (e, t, last = \"\") => {\n  OperationMethod.hightLightInit();\n  let edit_aligned = editAligned.value.filter((item) => {\n    return item[0] == editAlignedIndex.value && (item[1] == t || \"all\" == t)\n      ? false\n      : true;\n  });\n  if (e != \"clear\") {\n    let lastkey = \"\";\n    if (t == \"v\") {\n      lastkey = e == \"gblur\" ? last : \"\";\n    } else if (e == \"replace\") {\n      dialogReplaceText.value = true;\n      dialogReplaceTitle.value =\n        modifiedTextList.value[editAlignedIndex.value].text;\n      return;\n    }\n    let time = [\n      modifiedTextList.value[editAlignedIndex.value].start,\n      modifiedTextList.value[editAlignedIndex.value].end,\n      editAlignedIndex.value,\n    ];\n    time[0] = item[0].toFixed(4);\n    [1] = item[1].toFixed(4);\n    let item = [time, t, e, lastkey];\n    edit_aligned.push(item);\n  } else {\n    rightPopup.value = false;\n    return;\n  }\n  editAligned.value = edit_aligned;\n  console.log()\n  rightPopup.value = false;\n};\nonMounted(() => {\n  window.addEventListener(\"mousedown\", mouseDown);\n});\n</script>\n\n<style scoped lang=\"scss\">\n.appContainer {\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  width: 850px;\n  overflow: hidden;\n}\n\n.firstPageContainer {\n  position: relative;\n}\n.firstPageContainer,\n.pageContainer {\n  padding-top: 80px;\n  width: 800px;\n  padding-bottom: 150px;\n}\n.modifiedCon {\n  position: relative;\n}\n\n.firstPageContainer .elButton {\n  width: 100px;\n  height: 30px;\n}\n.firstPageContainer .aligned {\n  margin-left: 150px;\n}\n.modifiedTopContainer {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n.topTip {\n  font-size: 18px;\n  color: #353535;\n}\n.topDescribe {\n  font-size: 14px;\n  color: #727272;\n  margin-top: 5px;\n}\n.topDescribe span {\n  font-weight: bold;\n}\n.video-js1 {\n  margin-top: 15px;\n  width: 800px;\n  height: 500px;\n}\n.video-js {\n  margin-top: 15px;\n}\n#app\n  .firstPageContainer\n  button.el-button.elButton.el-button--default.el-button--small {\n  margin-left: 0;\n}\n.firstPageContainer .transcriptCon {\n  width: 800px;\n  display: flex;\n  margin-top: 15px;\n}\n.firstPageContainer .transcriptTip {\n  width: 100px;\n}\n.nextbutton {\n  margin-top: 35px;\n  position: absolute;\n  width: 95px;\n  right: 0;\n}\n.pageContainer .videoframe {\n  overflow-x: scroll;\n  margin-top: 20px;\n  width: 800px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow-y: hidden;\n  box-shadow: 0 0 1px 1px rgb(211, 211, 211);\n  border-radius: 5px;\n  height: 120px;\n}\n.modifiedWaveform {\n  width: 470px;\n  position: relative;\n  margin-top: 10px;\n  box-shadow: 0 0 1px 1px rgb(211, 211, 211);\n  border-radius: 5px;\n  overflow-y: hidden;\n}\n#waveform > wave::-webkit-scrollbar {\n  height: 10px;\n}\n#waveform > wave::-webkit-scrollbar-track {\n  background-color: rgb(255, 255, 255);\n  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.2);\n}\n#waveform > wave::-webkit-scrollbar-thumb {\n  background-color: rgb(207, 207, 207);\n  border-radius: 10px;\n}\n.displayTimeContainer {\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n  width: 470px;\n}\n.textContent {\n  width: 470px;\n  font-size: 18px;\n  line-height: 25px;\n  margin-top: -10px;\n}\n.textContent span {\n  display: inline-block;\n  margin-top: 5px;\n  margin-right: 10px;\n  user-select: none;\n}\n.textContent span:hover {\n  background-color: rgba(255, 228, 196, 0.5);\n  cursor: pointer;\n}\n.popupContainer {\n  box-shadow: 1px 1px 1px 1px rgb(189, 189, 189);\n  width: 130px;\n  background: #fff;\n  padding: 10px;\n  line-height: 30px;\n  color: rgb(77, 77, 77);\n  font-size: 16px;\n  z-index: 99;\n}\n.popupContainer .modality {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  line-height: 40px;\n  align-items: center;\n  font-size: 15px;\n}\n.popupContainer .modality span {\n  display: inline-block;\n  width: 70px;\n  color: rgb(73, 73, 73);\n}\n.popupContainer .state {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n  width: 100%;\n  font-size: 14px;\n  color: rgb(105, 105, 105);\n}\n.popupContainer .modalityClose {\n  padding-left: 10px;\n  font-size: 14px;\n}\n.popupContainer .modality:hover,\n.popupContainer .modalityClose:hover,\n.popupContainer .state:hover {\n  cursor: pointer;\n  background-color: rgb(236, 236, 236);\n}\n.asrCheckbox {\n  position: absolute;\n  margin-top: 30px;\n}\n.generate {\n  position: absolute;\n  margin-top: 35px;\n  right: 150px;\n  width: 95px;\n}\n\n.methodContent {\n  width: 320px;\n  overflow: hidden;\n  margin-top: 10px;\n}\n.dialogReplaceTextContainer {\n  display: flex;\n  flex-direction: column;\n  margin-top: -30px;\n}\n.dialogReplaceTitle {\n  width: 100px;\n}\n.dialogReplaceItem {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 10px;\n}\n.modalityMethod {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  line-height: 25px;\n  user-select: none;\n}\n.modalityMethod span {\n  margin-top: -1.5px;\n  margin-left: 10px;\n  font-size: 15px;\n}\n.methodState {\n  margin-left: 26px;\n  font-size: 14px;\n  position: relative;\n  color: #616161;\n  line-height: 28px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  user-select: none;\n}\n.modalityMethod span:hover,\n.methodState:hover {\n  cursor: pointer;\n}\n.methodState span:hover {\n  background-color: rgb(230, 230, 230);\n}\n.selectMethod {\n  position: relative;\n  top: 10px;\n}\n.textTimeInput,\n.startTimeInput,\n.endTimeInput {\n  width: 90px;\n}\n.textTimeInput,\n.startTimeInput {\n  margin-right: 10px;\n}\n.startTimeInput,\n.endTimeInput {\n  margin-left: 10px;\n}\n</style>\n\n<style lang=\"scss\">\n.el-step.is-simple .el-step__arrow {\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 50px !important;\n  transform: scale(0.5);\n}\n.el-step.is-simple {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-basis: 0 !important;\n}\n.el-step.is-simple .el-step__icon {\n  width: 16px;\n  height: 20px;\n  line-height: 20px;\n}\n.el-step.is-simple .el-step__main {\n  position: relative;\n  display: flex;\n  align-items: stretch;\n  flex-grow: 0;\n  width: max-content;\n}\n.el-step.is-simple .el-step__title {\n  font-size: 14px;\n}\n#app .stepTop .el-step__main .el-step__title {\n  max-width: 100%;\n}\n.el-step:last-of-type.is-flex {\n  width: 121px;\n}\n#modified-my-player {\n  margin-top: 10px;\n  width: 470px;\n  height: 320px;\n}\n.stepTop .el-step__main .is-finish,\n.stepTop .is-finish {\n  color: #67c23a;\n}\ndiv.stepTop .is-process > div,\n#app .stepTop .el-step__main .is-process {\n  color: #409eff;\n}\n.el-upload-dragger .successUpload .el-icon--upload {\n  color: #409eff;\n}\n.el-upload__tip {\n  font-size: 13px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.el-upload__tip span {\n  margin-left: 5px;\n}\n.el-card__body {\n  padding: 10px;\n}\n.tooltip-base-box .box-item {\n  width: 110px;\n}\n.el-dialog__body {\n  height: 40px;\n}\n.el-dialog__footer {\n  padding-top: 0;\n}\n#modifiedWaveform {\n  height: 75px !important;\n}\n#modifiedWaveform > wave {\n  height: 75px !important;\n  &::-webkit-scrollbar {\n    height: 10px;\n  }\n  &::-webkit-scrollbar-track {\n    background-color: rgb(255, 255, 255);\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.2);\n  }\n  &::-webkit-scrollbar-thumb {\n    background-color: rgb(207, 207, 207);\n    border-radius: 10px;\n  }\n}\n.methodContent .el-slider__runway.show-input {\n  margin-right: 10px;\n}\n.methodContent .el-slider__button {\n  height: 14px;\n  width: 14px;\n}\n.methodContent .el-slider__input {\n  width: 60px;\n}\n.methodContent .el-input-number__decrease,\n.methodContent .el-input-number__increase {\n  width: 14px;\n}\n.modifiedCon .el-divider--horizontal {\n  margin: 15px 0;\n  margin-top: 80px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}