{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport OperationMethod from \"@/utils/operation.js\";\nimport TableModified from \"@/components/TableModified.vue\";\nimport * as echarts from \"echarts\";\nexport default {\n  __name: 'ViewResult',\n  props: {\n    textList: Array,\n    duration: Number,\n    videoUrl: String,\n    originalVideoUrl: String,\n    editAligned: Array,\n    methodData: Object,\n    viewResults: Object,\n    defenceVideoUrl: String\n  },\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n    const modifiedWave = ref(null);\n    const originalWaveform = ref(null);\n    const originalWavesurfer = ref(null);\n    const modifiedWavesurfer = ref(null);\n    const originalPlayer = ref(null);\n    const modifiedPlayer = ref(null);\n    const sliderValue = ref(0);\n    const mediaPaused = ref(true);\n    const textList = computed(() => {\n      return props.textList;\n    });\n    const duration = computed(() => {\n      return props.duration;\n    });\n    const videoUrl = computed(() => {\n      return props.videoUrl;\n    });\n    const regions = computed(() => {\n      let dataList = [];\n      textList.value.forEach(item => {\n        let itemdata = {\n          start: 0,\n          end: 0,\n          attributes: {\n            label: \"\"\n          },\n          data: {\n            note: \"\"\n          },\n          loop: false,\n          drag: false,\n          resize: false,\n          color: \"rgba(181, 198, 241, 0.2)\",\n          handleStyle: false\n        };\n        itemdata.start = item.start;\n        itemdata.end = item.end;\n        dataList.push(itemdata);\n      });\n      return dataList;\n    });\n    const labelResult = computed(() => {\n      var labelResult = {\n        original: 0,\n        modified: 0,\n        defended: 0\n      };\n      var account = 0;\n      for (let item in props.viewResults.result.original) {\n        labelResult.original += props.viewResults.result.original[item];\n        labelResult.modified += props.viewResults.result.modified[item];\n        if (props.viewResults.result.defended != undefined) {\n          labelResult.defended += props.viewResults.result.defended[item];\n        }\n        account++;\n      }\n      labelResult.original = Number((labelResult.original / account).toFixed(3));\n      labelResult.modified = Number((labelResult.modified / account).toFixed(3));\n      labelResult.defended = Number((labelResult.defended / account).toFixed(3));\n      return labelResult;\n    });\n    const viewResults = computed(() => {\n      let middleResult = props.viewResults;\n      for (let item in middleResult.result.original) {\n        middleResult.result.original[item] = Number(middleResult.result.original[item].toFixed(3));\n        middleResult.result.modified[item] = Number(middleResult.result.modified[item].toFixed(3));\n        if (middleResult.result.defended != undefined) {\n          middleResult.result.defended[item] = Number(middleResult.result.defended[item].toFixed(3));\n        }\n      }\n      return middleResult;\n    });\n    const editAligned = computed(() => {\n      return props.editAligned;\n    });\n    const originalVideoUrl = computed(() => {\n      return props.originalVideoUrl;\n    });\n    const methodList = ref([{\n      value: \"audio\",\n      label: \"Audio\"\n    }, {\n      value: \"video\",\n      label: \"Video\"\n    }]);\n    const methodValue = ref(\"audio\");\n    const methodDetailList = computed(() => {\n      var detailList = [];\n      for (let item in props.viewResults.feature.original) {\n        if (item.indexOf(\"AU\") == -1 && methodValue.value == \"audio\") {\n          detailList.push({\n            value: item,\n            label: item\n          });\n        } else if (item.indexOf(\"AU\") != -1 && methodValue.value == \"video\") {\n          detailList.push({\n            value: item,\n            label: item\n          });\n        }\n      }\n      return detailList;\n    });\n    const methodDetailValue = ref(methodDetailList.value[0].value);\n    const boxItemTip = computed(() => {\n      return OperationMethod.echartsDataChange(methodDetailValue.value);\n    });\n    const modifiedWaveSwitch = ref(true);\n    const chooseClick = t => {\n      if (t == \"one\") {\n        methodDetailValue.value = methodDetailList.value[0].value;\n      }\n      var originalSeriesDate = [];\n      var modifiedSeriesDate = [];\n      var defendedSeriesDate = [];\n      for (let i = 0; i < textList.value.length; i++) {\n        originalSeriesDate.push(viewResults.value.feature.original[methodDetailValue.value][i]);\n        modifiedSeriesDate.push(viewResults.value.feature.modified[methodDetailValue.value][i]);\n        if (props.viewResults.feature.defended != undefined) {\n          defendedSeriesDate.push(viewResults.value.feature.defended[methodDetailValue.value][i]);\n        }\n      }\n      option.series[0].data = originalSeriesDate;\n      option.series[1].data = modifiedSeriesDate;\n      if (props.viewResults.feature.defended != undefined) {\n        option.series[2].data = defendedSeriesDate;\n      }\n      myChart.setOption(option, false, false);\n    };\n    const originalEvent = () => {\n      originalWavesurfer.value = OperationMethod.waveformCreate(\"#originalWaveform\", regions.value, \"#originalWaveTimeline\");\n      originalWavesurfer.value.load(originalVideoUrl.value);\n      originalWavesurfer.value.on(\"ready\", () => {});\n    };\n    const modifiedEvent = url => {\n      modifiedWavesurfer.value = OperationMethod.waveformCreate(\"#modifiedWave\", regions.value, \"#modifiedTimeline\");\n      modifiedWavesurfer.value.load(url);\n      modifiedWavesurfer.value.on(\"ready\", () => {\n        OperationMethod.dragBackgroundColor(editAligned.value, textList.value.length);\n      });\n    };\n    var myChart = null;\n    var option = null;\n    const chartCreate = () => {\n      var chartDom = document.getElementById(\"main\");\n      myChart = echarts.init(chartDom);\n      var xAxisData = [];\n      var originalSeriesDate = [];\n      var modifiedSeriesDate = [];\n      var defenceSeriesDate = [];\n      for (let i = 0; i < textList.value.length; i++) {\n        xAxisData.push({\n          value: textList.value[i].text,\n          id: i\n        });\n        originalSeriesDate.push(viewResults.value.feature.original[methodDetailValue.value][i]);\n        modifiedSeriesDate.push(viewResults.value.feature.modified[methodDetailValue.value][i]);\n        if (props.viewResults.feature.defended != undefined) {\n          defenceSeriesDate.push(viewResults.value.feature.defended[methodDetailValue.value][i]);\n        }\n      }\n      var optionData = [\"Original\", \"Modified\"];\n      var optionSeries = [{\n        data: originalSeriesDate,\n        type: \"line\",\n        name: \"Original\",\n        color: [\"#e69d87\"],\n        animation: false,\n        markLine: {\n          symbol: \"none\",\n          label: {\n            position: \"start\",\n            textStyle: {\n              fontSize: 16\n            },\n            formatter: function (params) {\n              return textList.value[params.value].text;\n            }\n          },\n          data: [{\n            silent: false,\n            lineStyle: {\n              type: \"line\",\n              color: \"#505050\"\n            },\n            xAxis: 0\n          }]\n        }\n      }, {\n        data: modifiedSeriesDate,\n        type: \"line\",\n        name: \"Modified\",\n        color: [\"#8dc1a9\"]\n      }];\n      if (props.viewResults.feature.defended != undefined) {\n        optionData.push(\"Defended\");\n        optionSeries.push({\n          data: defenceSeriesDate,\n          type: \"line\",\n          name: \"Defended\",\n          color: [\"#51abff\"]\n        });\n      }\n      option = {\n        legend: {\n          icon: \"roundRect\",\n          orient: \"horizontal\",\n          itemHeight: 2,\n          data: optionData,\n          right: 50,\n          top: 25\n        },\n        xAxis: {\n          type: \"category\",\n          show: false,\n          data: xAxisData,\n          axisLabel: {\n            interval: \"auto\"\n          }\n        },\n        tooltip: {\n          trigger: \"axis\",\n          backgroundColor: \"#000000\",\n          textStyle: {\n            color: \"#ffffff\"\n          },\n          formatter: function (params) {\n            return params[0].name;\n          }\n        },\n        yAxis: {\n          type: \"value\"\n        },\n        series: optionSeries\n      };\n      option && myChart.setOption(option, false, false);\n    };\n    const modifiedVideoTime = ref(0);\n    const originalVideoTime = ref(0);\n    const dialogScores = ref(false);\n    const originalVideoTimeEvent = that => {\n      let count = 10;\n      let timer = setInterval(() => {\n        let nowTime = that.currentTime();\n        if (nowTime >= duration.value) {\n          clearInterval(timer);\n          return;\n        }\n        originalVideoTime.value = nowTime;\n        originalWavesurfer.value.seekAndCenter(originalVideoTime.value / duration.value > 1 ? 1 : originalVideoTime.value / duration.value);\n        if (originalVideoTime.value > textList.value[textList.value.length - 1].end) {\n          $(`#originalWaveform > wave > region`).css({\n            background: \"rgba(181, 198, 241, 0.2)\"\n          });\n        } else {\n          let watchSwitch = true;\n          for (let index = 0; index < textList.value.length; index++) {\n            if (textList.value[index].start < originalVideoTime.value && originalVideoTime.value <= textList.value[index].end) {\n              $(`#originalWaveform > wave > region:nth-child(${index + 2})`).css({\n                background: \"rgba(181, 198, 241, 0.2)\"\n              });\n              $(`#originalWaveform > wave > region:nth-child(${index + 3})`).css({\n                background: \"rgba(255, 228, 196, 0.5)\"\n              });\n              watchSwitch = false;\n              break;\n            }\n          }\n          if (watchSwitch) {\n            $(`#originalWaveform > wave > region`).css({\n              background: \"rgba(181, 198, 241, 0.2)\"\n            });\n          }\n        }\n        count == 0 ? clearInterval(timer) : count--;\n      }, 25);\n    };\n    const modifiedVideoTimeEvent = that => {\n      let count = 10;\n      let timer = setInterval(() => {\n        let nowTime = that.currentTime();\n        if (nowTime >= duration.value) {\n          clearInterval(timer);\n          watchVideo(nowTime);\n          return;\n        }\n        modifiedVideoTime.value = nowTime;\n        modifiedWavesurfer.value.seekAndCenter(modifiedVideoTime.value / duration.value > 1 ? 1 : modifiedVideoTime.value / duration.value);\n        watchVideo(modifiedVideoTime.value);\n        echartTimeOffset(modifiedVideoTime.value);\n        sliderValue.value = modifiedVideoTime.value / duration.value * 100;\n        count == 0 ? clearInterval(timer) : count--;\n      }, 25);\n    };\n    var lastword = \"\";\n    const echartTimeOffset = modifiedVideoTime => {\n      for (let i = props.textList.length - 1; i >= 0; i--) {\n        if (modifiedVideoTime >= props.textList[i].start && lastword != props.textList[i].text && modifiedVideoTime <= props.textList[i].end) {\n          lastword = props.textList[i].text;\n          option.series[0].markLine.data[0].xAxis = i;\n          myChart.setOption({\n            series: option.series\n          }, false, false);\n          break;\n        }\n      }\n    };\n    const hightLightInit = () => {\n      $(`#modifiedWave > wave > region`).css({\n        background: \"rgba(181, 198, 241, 0.2)\"\n      });\n      $(`.pageContainer .viewResultContainer .textContent span`).css({\n        background: \"#fff\"\n      });\n    };\n    const highlightOver = (index, background, textBackground) => {\n      $(`#modifiedWave > wave > region:nth-child(${index + 3})`).css({\n        background\n      });\n      $(`.pageContainer .viewResultContainer .textContent span:nth-child(${index + 1})`).css({\n        background: textBackground\n      });\n    };\n    const watchVideo = videoTime => {\n      if (videoTime > textList.value[textList.value.length - 1].end) {\n        hightLightInit();\n        OperationMethod.dragBackgroundColor(editAligned.value, textList.value.length);\n        return;\n      }\n      let watchSwitch = true;\n      for (let index = 0; index < textList.value.length; index++) {\n        if (textList.value[index].start < videoTime && videoTime <= textList.value[index].end) {\n          highlightOver(index - 1, \"rgba(181, 198, 241, 0.2)\", \"#fff\");\n          highlightOver(index, \"rgba(255, 228, 196, 0.5)\", \"rgba(255, 228, 196, 0.5)\");\n          OperationMethod.dragBackgroundColor(editAligned.value, textList.value.length);\n          watchSwitch = false;\n          break;\n        }\n      }\n      if (watchSwitch) {\n        hightLightInit();\n        OperationMethod.dragBackgroundColor(editAligned.value, textList.value.length);\n      }\n    };\n    var originalLocked = true;\n    var modifiedLocked = true;\n    const originalVideo = () => {\n      originalPlayer.value = videojs(\"viewOriginal\", {}, function onPlayerReady() {\n        this.on(\"play\", function (e) {\n          modifiedPlayer.value.play();\n          modifiedVideoTimeEvent(this);\n          originalVideoTimeEvent(this);\n          this.volume(0);\n          modifiedPlayer.value.volume(1);\n          mediaPaused.value = false;\n        });\n        this.on(\"seeked\", function () {\n          originalLocked == false;\n          if (modifiedLocked) {\n            let nowTime = this.currentTime();\n            modifiedPlayer.value.currentTime(nowTime);\n          }\n          modifiedLocked = true;\n          $(`#originalWaveform > wave > region`).css({\n            background: \"rgba(181, 198, 241, 0.2)\"\n          });\n          hightLightInit();\n        });\n        this.on(\"pause\", function () {\n          mediaPaused.value = true;\n          modifiedPlayer.value.pause();\n        });\n      });\n    };\n    const modifiedVideo = () => {\n      modifiedPlayer.value = videojs(\"viewModified\", {}, function onPlayerReady() {\n        this.on(\"play\", function (e) {\n          originalPlayer.value.play();\n          modifiedVideoTimeEvent(this);\n          originalVideoTimeEvent(this);\n          mediaPaused.value = false;\n          this.volume(0);\n          originalPlayer.value.volume(1);\n        });\n        this.on(\"timeupdate\", function (e) {\n          originalVideoTimeEvent(this);\n          modifiedVideoTimeEvent(this);\n        });\n        this.on(\"seeked\", function () {\n          modifiedLocked = false;\n          if (originalLocked) {\n            let nowTime = this.currentTime();\n            originalPlayer.value.currentTime(nowTime);\n          }\n          originalLocked == true;\n          $(`#originalWaveform > wave > region`).css({\n            background: \"rgba(181, 198, 241, 0.2)\"\n          });\n          hightLightInit();\n        });\n        this.on(\"pause\", function () {\n          mediaPaused.value = true;\n          originalPlayer.value.pause();\n        });\n      });\n    };\n    const modifiedDefenceList = ref([{\n      label: \"Modified\",\n      value: \"Modified\"\n    }, {\n      label: \"Defended\",\n      value: \"Defended\"\n    }]);\n    const modifiedDefence = ref(\"Modified\");\n    const defenceChange = () => {\n      modifiedPlayer.value.currentTime(0);\n      originalPlayer.value.currentTime(0);\n      option.series[0].markLine.data[0].xAxis = 0;\n      myChart.setOption(option, false, false);\n      modifiedPlayer.value.dispose();\n      var url = videoUrl.value;\n      if (modifiedDefence.value != \"Modified\") {\n        url = props.defenceVideoUrl;\n      }\n      let html = '<video id=\"viewModified\" class=\"video-js vjs-big-play-centered\" controls data-setup=\"{}\"><source src=\"' + url + '\" type=\"video/mp4\" /></video>';\n      document.getElementById(\"viewModifiedContainer\").innerHTML = html;\n      modifiedVideo();\n      modifiedWaveSwitch.value = false;\n      setTimeout(() => {\n        modifiedWaveSwitch.value = true;\n        setTimeout(() => {\n          modifiedEvent(url);\n        }, 2);\n      }, 2);\n    };\n    const originalSeekToTime = textitem => {\n      $(`#originalWaveform > wave > region`).css({\n        background: \"rgba(181, 198, 241, 0.2)\"\n      });\n      if (textitem == null) {\n        setTimeout(() => {\n          originalPlayer.value.currentTime(originalWavesurfer.value.getCurrentTime() + 0.000005);\n        }, 5);\n      } else {\n        originalPlayer.value.currentTime(textitem + 0.000005);\n      }\n    };\n    const modifiedSeekToTime = textitem => {\n      hightLightInit();\n      if (textitem == null) {\n        setTimeout(() => {\n          modifiedPlayer.value.currentTime(modifiedWavesurfer.value.getCurrentTime() + 0.000005);\n        }, 5);\n      } else {\n        modifiedPlayer.value.currentTime(textitem + 0.000005);\n      }\n    };\n    onMounted(() => {\n      originalEvent();\n      modifiedEvent(videoUrl.value);\n      chartCreate();\n      originalVideo();\n      modifiedVideo();\n    });\n    const playVideo = type => {\n      if (type == \"play\") {\n        if (sliderValue.value != 100) {\n          mediaPaused.value ? modifiedPlayer.value.play() : modifiedPlayer.value.pause();\n          mediaPaused.value = !mediaPaused.value;\n        }\n      } else if (type == \"start\") {\n        modifiedPlayer.value.currentTime(0);\n        option.series[0].markLine.data[0].xAxis = 0;\n        myChart.setOption({\n          series: option.series\n        }, false, false);\n      } else if (type == \"end\") {\n        modifiedPlayer.value.currentTime(duration.value - 0.000005);\n        option.series[0].markLine.data[0].xAxis = props.textList.length - 1;\n        myChart.setOption({\n          series: option.series\n        }, false, false);\n      } else if (type == \"last\") {\n        if (modifiedVideoTime.value > textList.value[textList.value.length - 1].end) {\n          modifiedPlayer.value.currentTime(textList.value[textList.value.length - 1].start + 0.000005);\n        } else if (modifiedVideoTime.value > textList.value[textList.value.length - 1].start) {\n          modifiedPlayer.value.currentTime(textList.value[textList.value.length - 2].start + 0.000005);\n        } else if (modifiedVideoTime.value < textList.value[textList.value.length - 1].start) {\n          let videoTime = 0;\n          for (let index = 0; index < textList.value.length; index++) {\n            if (textList.value[index].start < modifiedVideoTime.value && modifiedVideoTime.value <= textList.value[index + 1].start) {\n              if (index) {\n                videoTime = textList.value[index - 1].start + 0.000005;\n              }\n              break;\n            }\n          }\n          modifiedPlayer.value.currentTime(videoTime);\n        }\n      } else if (type == \"next\") {\n        if (modifiedVideoTime.value < textList.value[0].start) {\n          modifiedPlayer.value.currentTime(textList.value[0].start + 0.000005);\n        } else if (modifiedVideoTime.value < textList.value[textList.value.length - 1].start) {\n          let videoTime = 0;\n          for (let index = 0; index < textList.value.length; index++) {\n            if (textList.value[index].start < modifiedVideoTime.value && modifiedVideoTime.value <= textList.value[index + 1].start) {\n              videoTime = textList.value[index + 1].start + 0.000005;\n              break;\n            }\n          }\n          modifiedPlayer.value.currentTime(videoTime);\n        }\n      }\n    };\n    const sliderChange = e => {\n      modifiedPlayer.value.currentTime(sliderValue.value / 100 * duration.value + 0.000005);\n    };\n    const formatTooltip = e => {\n      return Math.floor(e / 100 * duration.value * 100) / 100 + \"S\";\n    };\n    const __returned__ = {\n      modifiedWave,\n      originalWaveform,\n      originalWavesurfer,\n      modifiedWavesurfer,\n      originalPlayer,\n      modifiedPlayer,\n      sliderValue,\n      mediaPaused,\n      props,\n      textList,\n      duration,\n      videoUrl,\n      regions,\n      labelResult,\n      viewResults,\n      editAligned,\n      originalVideoUrl,\n      methodList,\n      methodValue,\n      methodDetailList,\n      methodDetailValue,\n      boxItemTip,\n      modifiedWaveSwitch,\n      chooseClick,\n      originalEvent,\n      modifiedEvent,\n      get myChart() {\n        return myChart;\n      },\n      set myChart(v) {\n        myChart = v;\n      },\n      get option() {\n        return option;\n      },\n      set option(v) {\n        option = v;\n      },\n      chartCreate,\n      modifiedVideoTime,\n      originalVideoTime,\n      dialogScores,\n      originalVideoTimeEvent,\n      modifiedVideoTimeEvent,\n      get lastword() {\n        return lastword;\n      },\n      set lastword(v) {\n        lastword = v;\n      },\n      echartTimeOffset,\n      hightLightInit,\n      highlightOver,\n      watchVideo,\n      get originalLocked() {\n        return originalLocked;\n      },\n      set originalLocked(v) {\n        originalLocked = v;\n      },\n      get modifiedLocked() {\n        return modifiedLocked;\n      },\n      set modifiedLocked(v) {\n        modifiedLocked = v;\n      },\n      originalVideo,\n      modifiedVideo,\n      modifiedDefenceList,\n      modifiedDefence,\n      defenceChange,\n      originalSeekToTime,\n      modifiedSeekToTime,\n      playVideo,\n      sliderChange,\n      formatTooltip,\n      ref,\n      computed,\n      onMounted,\n      get OperationMethod() {\n        return OperationMethod;\n      },\n      TableModified,\n      get echarts() {\n        return echarts;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":";AA0mBA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,OAAOC,eAAe,MAAM,sBAAsB;AAClD,OAAOC,aAAa,MAAM,gCAAgC;AAC1D,OAAO,KAAKC,OAAO,MAAM,SAAS;;;;;;;;;;;;;;;;;;IAClC,MAAMC,YAAY,GAAGN,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMO,gBAAgB,GAAGP,GAAG,CAAC,IAAI,CAAC;IAClC,MAAMQ,kBAAkB,GAAGR,GAAG,CAAC,IAAI,CAAC;IACpC,MAAMS,kBAAkB,GAAGT,GAAG,CAAC,IAAI,CAAC;IACpC,MAAMU,cAAc,GAAGV,GAAG,CAAC,IAAI,CAAC;IAChC,MAAMW,cAAc,GAAGX,GAAG,CAAC,IAAI,CAAC;IAChC,MAAMY,WAAW,GAAGZ,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMa,WAAW,GAAGb,GAAG,CAAC,IAAI,CAAC;IAW7B,MAAMc,QAAQ,GAAGb,QAAQ,CAAC,MAAM;MAC9B,OAAOc,KAAK,CAACD,QAAQ;IACvB,CAAC,CAAC;IACF,MAAME,QAAQ,GAAGf,QAAQ,CAAC,MAAM;MAC9B,OAAOc,KAAK,CAACC,QAAQ;IACvB,CAAC,CAAC;IACF,MAAMC,QAAQ,GAAGhB,QAAQ,CAAC,MAAM;MAC9B,OAAOc,KAAK,CAACE,QAAQ;IACvB,CAAC,CAAC;IACF,MAAMC,OAAO,GAAGjB,QAAQ,CAAC,MAAM;MAC7B,IAAIkB,QAAQ,GAAG,EAAE;MACjBL,QAAQ,CAACM,KAAK,CAACC,OAAO,CAAEC,IAAI,IAAK;QAC/B,IAAIC,QAAQ,GAAG;UACbC,KAAK,EAAE,CAAC;UACRC,GAAG,EAAE,CAAC;UACNC,UAAU,EAAE;YACVC,KAAK,EAAE;UACT,CAAC;UACDC,IAAI,EAAE;YACJC,IAAI,EAAE;UACR,CAAC;UACDC,IAAI,EAAE,KAAK;UACXC,IAAI,EAAE,KAAK;UACXC,MAAM,EAAE,KAAK;UACbC,KAAK,EAAE,0BAA0B;UACjCC,WAAW,EAAE;QACf,CAAC;QACDX,QAAQ,CAACC,KAAK,GAAGF,IAAI,CAACE,KAAK;QAC3BD,QAAQ,CAACE,GAAG,GAAGH,IAAI,CAACG,GAAG;QACvBN,QAAQ,CAACgB,IAAI,CAACZ,QAAQ,CAAC;MACzB,CAAC,CAAC;MACF,OAAOJ,QAAQ;IACjB,CAAC,CAAC;IACF,MAAMiB,WAAW,GAAGnC,QAAQ,CAAC,MAAM;MACjC,IAAImC,WAAW,GAAG;QAChBC,QAAQ,EAAE,CAAC;QACXC,QAAQ,EAAE,CAAC;QACXC,QAAQ,EAAE;MACZ,CAAC;MACD,IAAIC,OAAO,GAAG,CAAC;MACf,KAAK,IAAIlB,IAAI,IAAIP,KAAK,CAAC0B,WAAW,CAACC,MAAM,CAACL,QAAQ,EAAE;QAClDD,WAAW,CAACC,QAAQ,IAAItB,KAAK,CAAC0B,WAAW,CAACC,MAAM,CAACL,QAAQ,CAACf,IAAI,CAAC;QAC/Dc,WAAW,CAACE,QAAQ,IAAIvB,KAAK,CAAC0B,WAAW,CAACC,MAAM,CAACJ,QAAQ,CAAChB,IAAI,CAAC;QAC/D,IAAIP,KAAK,CAAC0B,WAAW,CAACC,MAAM,CAACH,QAAQ,IAAII,SAAS,EAAE;UAClDP,WAAW,CAACG,QAAQ,IAAIxB,KAAK,CAAC0B,WAAW,CAACC,MAAM,CAACH,QAAQ,CAACjB,IAAI,CAAC;QACjE;QACAkB,OAAO,EAAE;MACX;MACAJ,WAAW,CAACC,QAAQ,GAAGO,MAAM,CAAC,CAACR,WAAW,CAACC,QAAQ,GAAGG,OAAO,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAC;MAC1ET,WAAW,CAACE,QAAQ,GAAGM,MAAM,CAAC,CAACR,WAAW,CAACE,QAAQ,GAAGE,OAAO,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAC;MAC1ET,WAAW,CAACG,QAAQ,GAAGK,MAAM,CAAC,CAACR,WAAW,CAACG,QAAQ,GAAGC,OAAO,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAC;MAC1E,OAAOT,WAAW;IACpB,CAAC,CAAC;IACF,MAAMK,WAAW,GAAGxC,QAAQ,CAAC,MAAM;MACjC,IAAI6C,YAAY,GAAG/B,KAAK,CAAC0B,WAAW;MACpC,KAAK,IAAInB,IAAI,IAAIwB,YAAY,CAACJ,MAAM,CAACL,QAAQ,EAAE;QAC7CS,YAAY,CAACJ,MAAM,CAACL,QAAQ,CAACf,IAAI,CAAC,GAAGsB,MAAM,CACzCE,YAAY,CAACJ,MAAM,CAACL,QAAQ,CAACf,IAAI,CAAC,CAACuB,OAAO,CAAC,CAAC,CAAC,CAC9C;QACDC,YAAY,CAACJ,MAAM,CAACJ,QAAQ,CAAChB,IAAI,CAAC,GAAGsB,MAAM,CACzCE,YAAY,CAACJ,MAAM,CAACJ,QAAQ,CAAChB,IAAI,CAAC,CAACuB,OAAO,CAAC,CAAC,CAAC,CAC9C;QACD,IAAIC,YAAY,CAACJ,MAAM,CAACH,QAAQ,IAAII,SAAS,EAAE;UAC7CG,YAAY,CAACJ,MAAM,CAACH,QAAQ,CAACjB,IAAI,CAAC,GAAGsB,MAAM,CACzCE,YAAY,CAACJ,MAAM,CAACH,QAAQ,CAACjB,IAAI,CAAC,CAACuB,OAAO,CAAC,CAAC,CAAC,CAC9C;QACH;MACF;MACA,OAAOC,YAAY;IACrB,CAAC,CAAC;IACF,MAAMC,WAAW,GAAG9C,QAAQ,CAAC,MAAM;MACjC,OAAOc,KAAK,CAACgC,WAAW;IAC1B,CAAC,CAAC;IACF,MAAMC,gBAAgB,GAAG/C,QAAQ,CAAC,MAAM;MACtC,OAAOc,KAAK,CAACiC,gBAAgB;IAC/B,CAAC,CAAC;IACF,MAAMC,UAAU,GAAGjD,GAAG,CAAC,CACrB;MACEoB,KAAK,EAAE,OAAO;MACdO,KAAK,EAAE;IACT,CAAC,EACD;MACEP,KAAK,EAAE,OAAO;MACdO,KAAK,EAAE;IACT,CAAC,CACF,CAAC;IACF,MAAMuB,WAAW,GAAGlD,GAAG,CAAC,OAAO,CAAC;IAChC,MAAMmD,gBAAgB,GAAGlD,QAAQ,CAAC,MAAM;MACtC,IAAImD,UAAU,GAAG,EAAE;MACnB,KAAK,IAAI9B,IAAI,IAAIP,KAAK,CAAC0B,WAAW,CAACY,OAAO,CAAChB,QAAQ,EAAE;QACnD,IAAIf,IAAI,CAACgC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAIJ,WAAW,CAAC9B,KAAK,IAAI,OAAO,EAAE;UAC5DgC,UAAU,CAACjB,IAAI,CAAC;YACdf,KAAK,EAAEE,IAAI;YACXK,KAAK,EAAEL;UACT,CAAC,CAAC;QACJ,CAAC,MAAM,IAAIA,IAAI,CAACgC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAIJ,WAAW,CAAC9B,KAAK,IAAI,OAAO,EAAE;UACnEgC,UAAU,CAACjB,IAAI,CAAC;YACdf,KAAK,EAAEE,IAAI;YACXK,KAAK,EAAEL;UACT,CAAC,CAAC;QACJ;MACF;MACA,OAAO8B,UAAU;IACnB,CAAC,CAAC;IACF,MAAMG,iBAAiB,GAAGvD,GAAG,CAACmD,gBAAgB,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC;IAC9D,MAAMoC,UAAU,GAAGvD,QAAQ,CAAC,MAAM;MAChC,OAAOE,eAAe,CAACsD,iBAAiB,CAACF,iBAAiB,CAACnC,KAAK,CAAC;IACnE,CAAC,CAAC;IACF,MAAMsC,kBAAkB,GAAG1D,GAAG,CAAC,IAAI,CAAC;IAEpC,MAAM2D,WAAW,GAAIC,CAAC,IAAK;MACzB,IAAIA,CAAC,IAAI,KAAK,EAAE;QACdL,iBAAiB,CAACnC,KAAK,GAAG+B,gBAAgB,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACA,KAAK;MAC3D;MACA,IAAIyC,kBAAkB,GAAG,EAAE;MAC3B,IAAIC,kBAAkB,GAAG,EAAE;MAC3B,IAAIC,kBAAkB,GAAG,EAAE;MAC3B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlD,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAED,CAAC,EAAE,EAAE;QAC9CH,kBAAkB,CAAC1B,IAAI,CACrBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAAChB,QAAQ,CAACkB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACDF,kBAAkB,CAAC3B,IAAI,CACrBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAACf,QAAQ,CAACiB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACD,IAAIjD,KAAK,CAAC0B,WAAW,CAACY,OAAO,CAACd,QAAQ,IAAII,SAAS,EAAE;UACnDoB,kBAAkB,CAAC5B,IAAI,CACrBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAACd,QAAQ,CAACgB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACH;MACF;MACAE,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACvC,IAAI,GAAGiC,kBAAkB;MAC1CK,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACvC,IAAI,GAAGkC,kBAAkB;MAC1C,IAAI/C,KAAK,CAAC0B,WAAW,CAACY,OAAO,CAACd,QAAQ,IAAII,SAAS,EAAE;QACnDuB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACvC,IAAI,GAAGmC,kBAAkB;MAC5C;MAEAK,OAAO,CAACC,SAAS,CAACH,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;IACzC,CAAC;IACD,MAAMI,aAAa,GAAG,MAAM;MAC1B9D,kBAAkB,CAACY,KAAK,GAAGjB,eAAe,CAACoE,cAAc,CACvD,mBAAmB,EACnBrD,OAAO,CAACE,KAAK,EACb,uBAAuB,CACxB;MACDZ,kBAAkB,CAACY,KAAK,CAACoD,IAAI,CAACxB,gBAAgB,CAAC5B,KAAK,CAAC;MACrDZ,kBAAkB,CAACY,KAAK,CAACqD,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;IAChD,CAAC;IACD,MAAMC,aAAa,GAAIC,GAAG,IAAK;MAC7BlE,kBAAkB,CAACW,KAAK,GAAGjB,eAAe,CAACoE,cAAc,CACvD,eAAe,EACfrD,OAAO,CAACE,KAAK,EACb,mBAAmB,CACpB;MACDX,kBAAkB,CAACW,KAAK,CAACoD,IAAI,CAACG,GAAG,CAAC;MAClClE,kBAAkB,CAACW,KAAK,CAACqD,EAAE,CAAC,OAAO,EAAE,MAAM;QACzCtE,eAAe,CAACyE,mBAAmB,CACjC7B,WAAW,CAAC3B,KAAK,EACjBN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,CACtB;MACH,CAAC,CAAC;IACJ,CAAC;IACD,IAAIG,OAAO,GAAG,IAAI;IAClB,IAAIF,MAAM,GAAG,IAAI;IACjB,MAAMW,WAAW,GAAG,MAAM;MACxB,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC;MAC9CZ,OAAO,GAAG/D,OAAO,CAAC4E,IAAI,CAACH,QAAQ,CAAC;MAChC,IAAII,SAAS,GAAG,EAAE;MAClB,IAAIrB,kBAAkB,GAAG,EAAE;MAC3B,IAAIC,kBAAkB,GAAG,EAAE;MAC3B,IAAIqB,iBAAiB,GAAG,EAAE;MAC1B,KAAK,IAAInB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlD,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAED,CAAC,EAAE,EAAE;QAC9CkB,SAAS,CAAC/C,IAAI,CAAC;UAAEf,KAAK,EAAEN,QAAQ,CAACM,KAAK,CAAC4C,CAAC,CAAC,CAACoB,IAAI;UAAEC,EAAE,EAAErB;QAAE,CAAC,CAAC;QACxDH,kBAAkB,CAAC1B,IAAI,CACrBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAAChB,QAAQ,CAACkB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACDF,kBAAkB,CAAC3B,IAAI,CACrBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAACf,QAAQ,CAACiB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACD,IAAIjD,KAAK,CAAC0B,WAAW,CAACY,OAAO,CAACd,QAAQ,IAAII,SAAS,EAAE;UACnDwC,iBAAiB,CAAChD,IAAI,CACpBM,WAAW,CAACrB,KAAK,CAACiC,OAAO,CAACd,QAAQ,CAACgB,iBAAiB,CAACnC,KAAK,CAAC,CAAC4C,CAAC,CAAC,CAC/D;QACH;MACF;MACA,IAAIsB,UAAU,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC;MACzC,IAAIC,YAAY,GAAG,CACjB;QACE3D,IAAI,EAAEiC,kBAAkB;QACxB2B,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,UAAU;QAChBxD,KAAK,EAAE,CAAC,SAAS,CAAC;QAClByD,SAAS,EAAE,KAAK;QAChBC,QAAQ,EAAE;UACRC,MAAM,EAAE,MAAM;UACdjE,KAAK,EAAE;YACLkE,QAAQ,EAAE,OAAO;YACjBC,SAAS,EAAE;cACTC,QAAQ,EAAE;YACZ,CAAC;YACDC,SAAS,EAAE,UAAUC,MAAM,EAAE;cAC3B,OAAOnF,QAAQ,CAACM,KAAK,CAAC6E,MAAM,CAAC7E,KAAK,CAAC,CAACgE,IAAI;YAC1C;UACF,CAAC;UACDxD,IAAI,EAAE,CACJ;YACEsE,MAAM,EAAE,KAAK;YACbC,SAAS,EAAE;cACTX,IAAI,EAAE,MAAM;cACZvD,KAAK,EAAE;YACT,CAAC;YAEDmE,KAAK,EAAE;UACT,CAAC;QAEL;MACF,CAAC,EACD;QACExE,IAAI,EAAEkC,kBAAkB;QACxB0B,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,UAAU;QAChBxD,KAAK,EAAE,CAAC,SAAS;MACnB,CAAC,CACF;MACD,IAAIlB,KAAK,CAAC0B,WAAW,CAACY,OAAO,CAACd,QAAQ,IAAII,SAAS,EAAE;QACnD2C,UAAU,CAACnD,IAAI,CAAC,UAAU,CAAC;QAC3BoD,YAAY,CAACpD,IAAI,CAAC;UAChBP,IAAI,EAAEuD,iBAAiB;UACvBK,IAAI,EAAE,MAAM;UACZC,IAAI,EAAE,UAAU;UAChBxD,KAAK,EAAE,CAAC,SAAS;QACnB,CAAC,CAAC;MACJ;MACAiC,MAAM,GAAG;QACPmC,MAAM,EAAE;UACNC,IAAI,EAAE,WAAW;UACjBC,MAAM,EAAE,YAAY;UACpBC,UAAU,EAAE,CAAC;UACb5E,IAAI,EAAE0D,UAAU;UAChBmB,KAAK,EAAE,EAAE;UACTC,GAAG,EAAE;QACP,CAAC;QACDN,KAAK,EAAE;UACLZ,IAAI,EAAE,UAAU;UAChBmB,IAAI,EAAE,KAAK;UACX/E,IAAI,EAAEsD,SAAS;UACf0B,SAAS,EAAE;YAAEC,QAAQ,EAAE;UAAO;QAChC,CAAC;QACDC,OAAO,EAAE;UACPC,OAAO,EAAE,MAAM;UACfC,eAAe,EAAE,SAAS;UAC1BlB,SAAS,EAAE;YACT7D,KAAK,EAAE;UACT,CAAC;UACD+D,SAAS,EAAE,UAAUC,MAAM,EAAE;YAC3B,OAAOA,MAAM,CAAC,CAAC,CAAC,CAACR,IAAI;UACvB;QACF,CAAC;QACDwB,KAAK,EAAE;UACLzB,IAAI,EAAE;QACR,CAAC;QACDrB,MAAM,EAAEoB;MACV,CAAC;MACDrB,MAAM,IAAIE,OAAO,CAACC,SAAS,CAACH,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;IACnD,CAAC;IACD,MAAMgD,iBAAiB,GAAGlH,GAAG,CAAC,CAAC,CAAC;IAChC,MAAMmH,iBAAiB,GAAGnH,GAAG,CAAC,CAAC,CAAC;IAChC,MAAMoH,YAAY,GAAGpH,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAMqH,sBAAsB,GAAIC,IAAI,IAAK;MACvC,IAAIC,KAAK,GAAG,EAAE;MACd,IAAIC,KAAK,GAAGC,WAAW,CAAC,MAAM;QAC5B,IAAIC,OAAO,GAAGJ,IAAI,CAACK,WAAW,EAAE;QAChC,IAAID,OAAO,IAAI1G,QAAQ,CAACI,KAAK,EAAE;UAC7BwG,aAAa,CAACJ,KAAK,CAAC;UACpB;QACF;QACAL,iBAAiB,CAAC/F,KAAK,GAAGsG,OAAO;QACjClH,kBAAkB,CAACY,KAAK,CAACyG,aAAa,CACpCV,iBAAiB,CAAC/F,KAAK,GAAGJ,QAAQ,CAACI,KAAK,GAAG,CAAC,GACxC,CAAC,GACD+F,iBAAiB,CAAC/F,KAAK,GAAGJ,QAAQ,CAACI,KAAK,CAC7C;QACD,IACE+F,iBAAiB,CAAC/F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACxC,GAAG,EACvE;UACAqG,CAAC,CAAE,mCAAkC,CAAC,CAACC,GAAG,CAAC;YACzCC,UAAU,EAAE;UACd,CAAC,CAAC;QACJ,CAAC,MAAM;UACL,IAAIC,WAAW,GAAG,IAAI;UACtB,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGpH,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAEiE,KAAK,EAAE,EAAE;YAC1D,IACEpH,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAAC1G,KAAK,GAAG2F,iBAAiB,CAAC/F,KAAK,IACrD+F,iBAAiB,CAAC/F,KAAK,IAAIN,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAACzG,GAAG,EACpD;cACAqG,CAAC,CAAE,+CAA8CI,KAAK,GAAG,CAAE,GAAE,CAAC,CAACH,GAAG,CAAC;gBACjEC,UAAU,EAAE;cACd,CAAC,CAAC;cACFF,CAAC,CAAE,+CAA8CI,KAAK,GAAG,CAAE,GAAE,CAAC,CAACH,GAAG,CAAC;gBACjEC,UAAU,EAAE;cACd,CAAC,CAAC;cACFC,WAAW,GAAG,KAAK;cACnB;YACF;UACF;UACA,IAAIA,WAAW,EAAE;YACfH,CAAC,CAAE,mCAAkC,CAAC,CAACC,GAAG,CAAC;cACzCC,UAAU,EAAE;YACd,CAAC,CAAC;UACJ;QACF;QACAT,KAAK,IAAI,CAAC,GAAGK,aAAa,CAACJ,KAAK,CAAC,GAAGD,KAAK,EAAE;MAC7C,CAAC,EAAE,EAAE,CAAC;IACR,CAAC;IACD,MAAMY,sBAAsB,GAAIb,IAAI,IAAK;MACvC,IAAIC,KAAK,GAAG,EAAE;MACd,IAAIC,KAAK,GAAGC,WAAW,CAAC,MAAM;QAC5B,IAAIC,OAAO,GAAGJ,IAAI,CAACK,WAAW,EAAE;QAChC,IAAID,OAAO,IAAI1G,QAAQ,CAACI,KAAK,EAAE;UAC7BwG,aAAa,CAACJ,KAAK,CAAC;UACpBY,UAAU,CAACV,OAAO,CAAC;UACnB;QACF;QACAR,iBAAiB,CAAC9F,KAAK,GAAGsG,OAAO;QACjCjH,kBAAkB,CAACW,KAAK,CAACyG,aAAa,CACpCX,iBAAiB,CAAC9F,KAAK,GAAGJ,QAAQ,CAACI,KAAK,GAAG,CAAC,GACxC,CAAC,GACD8F,iBAAiB,CAAC9F,KAAK,GAAGJ,QAAQ,CAACI,KAAK,CAC7C;QACDgH,UAAU,CAAClB,iBAAiB,CAAC9F,KAAK,CAAC;QACnCiH,gBAAgB,CAACnB,iBAAiB,CAAC9F,KAAK,CAAC;QACzCR,WAAW,CAACQ,KAAK,GAAI8F,iBAAiB,CAAC9F,KAAK,GAAGJ,QAAQ,CAACI,KAAK,GAAI,GAAG;QACpEmG,KAAK,IAAI,CAAC,GAAGK,aAAa,CAACJ,KAAK,CAAC,GAAGD,KAAK,EAAE;MAC7C,CAAC,EAAE,EAAE,CAAC;IACR,CAAC;IACD,IAAIe,QAAQ,GAAG,EAAE;IACjB,MAAMD,gBAAgB,GAAInB,iBAAiB,IAAK;MAC9C,KAAK,IAAIlD,CAAC,GAAGjD,KAAK,CAACD,QAAQ,CAACmD,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACnD,IACEkD,iBAAiB,IAAInG,KAAK,CAACD,QAAQ,CAACkD,CAAC,CAAC,CAACxC,KAAK,IAC5C8G,QAAQ,IAAIvH,KAAK,CAACD,QAAQ,CAACkD,CAAC,CAAC,CAACoB,IAAI,IAClC8B,iBAAiB,IAAInG,KAAK,CAACD,QAAQ,CAACkD,CAAC,CAAC,CAACvC,GAAG,EAC1C;UACA6G,QAAQ,GAAGvH,KAAK,CAACD,QAAQ,CAACkD,CAAC,CAAC,CAACoB,IAAI;UACjClB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACwB,QAAQ,CAAC/D,IAAI,CAAC,CAAC,CAAC,CAACwE,KAAK,GAAGpC,CAAC;UAC3CI,OAAO,CAACC,SAAS,CACf;YACEF,MAAM,EAAED,MAAM,CAACC;UACjB,CAAC,EACD,KAAK,EACL,KAAK,CACN;UACD;QACF;MACF;IACF,CAAC;IACD,MAAMoE,cAAc,GAAG,MAAM;MAC3BT,CAAC,CAAE,+BAA8B,CAAC,CAACC,GAAG,CAAC;QACrCC,UAAU,EAAE;MACd,CAAC,CAAC;MACFF,CAAC,CAAE,uDAAsD,CAAC,CAACC,GAAG,CAAC;QAC7DC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ,CAAC;IACD,MAAMQ,aAAa,GAAG,CAACN,KAAK,EAAEF,UAAU,EAAES,cAAc,KAAK;MAC3DX,CAAC,CAAE,2CAA0CI,KAAK,GAAG,CAAE,GAAE,CAAC,CAACH,GAAG,CAAC;QAC7DC;MACF,CAAC,CAAC;MACFF,CAAC,CACE,mEACCI,KAAK,GAAG,CACT,GAAE,CACJ,CAACH,GAAG,CAAC;QACJC,UAAU,EAAES;MACd,CAAC,CAAC;IACJ,CAAC;IACD,MAAML,UAAU,GAAIM,SAAS,IAAK;MAChC,IAAIA,SAAS,GAAG5H,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACxC,GAAG,EAAE;QAC7D8G,cAAc,EAAE;QAChBpI,eAAe,CAACyE,mBAAmB,CACjC7B,WAAW,CAAC3B,KAAK,EACjBN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,CACtB;QACD;MACF;MACA,IAAIgE,WAAW,GAAG,IAAI;MACtB,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGpH,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAEiE,KAAK,EAAE,EAAE;QAC1D,IACEpH,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAAC1G,KAAK,GAAGkH,SAAS,IACvCA,SAAS,IAAI5H,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAACzG,GAAG,EACtC;UACA+G,aAAa,CAACN,KAAK,GAAG,CAAC,EAAE,0BAA0B,EAAE,MAAM,CAAC;UAC5DM,aAAa,CACXN,KAAK,EACL,0BAA0B,EAC1B,0BAA0B,CAC3B;UACD/H,eAAe,CAACyE,mBAAmB,CACjC7B,WAAW,CAAC3B,KAAK,EACjBN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,CACtB;UACDgE,WAAW,GAAG,KAAK;UACnB;QACF;MACF;MACA,IAAIA,WAAW,EAAE;QACfM,cAAc,EAAE;QAChBpI,eAAe,CAACyE,mBAAmB,CACjC7B,WAAW,CAAC3B,KAAK,EACjBN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,CACtB;MACH;IACF,CAAC;IACD,IAAI0E,cAAc,GAAG,IAAI;IACzB,IAAIC,cAAc,GAAG,IAAI;IACzB,MAAMC,aAAa,GAAG,MAAM;MAC1BnI,cAAc,CAACU,KAAK,GAAG0H,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,SAASC,aAAa,GAAG;QAC1E,IAAI,CAACtE,EAAE,CAAC,MAAM,EAAE,UAAUuE,CAAC,EAAE;UAC3BrI,cAAc,CAACS,KAAK,CAAC6H,IAAI,EAAE;UAC3Bd,sBAAsB,CAAC,IAAI,CAAC;UAC5Bd,sBAAsB,CAAC,IAAI,CAAC;UAC5B,IAAI,CAAC6B,MAAM,CAAC,CAAC,CAAC;UACdvI,cAAc,CAACS,KAAK,CAAC8H,MAAM,CAAC,CAAC,CAAC;UAC9BrI,WAAW,CAACO,KAAK,GAAG,KAAK;QAC3B,CAAC,CAAC;QACF,IAAI,CAACqD,EAAE,CAAC,QAAQ,EAAE,YAAY;UAC5BkE,cAAc,IAAI,KAAK;UACvB,IAAIC,cAAc,EAAE;YAClB,IAAIlB,OAAO,GAAG,IAAI,CAACC,WAAW,EAAE;YAChChH,cAAc,CAACS,KAAK,CAACuG,WAAW,CAACD,OAAO,CAAC;UAC3C;UACAkB,cAAc,GAAG,IAAI;UACrBd,CAAC,CAAE,mCAAkC,CAAC,CAACC,GAAG,CAAC;YACzCC,UAAU,EAAE;UACd,CAAC,CAAC;UACFO,cAAc,EAAE;QAClB,CAAC,CAAC;QACF,IAAI,CAAC9D,EAAE,CAAC,OAAO,EAAE,YAAY;UAC3B5D,WAAW,CAACO,KAAK,GAAG,IAAI;UACxBT,cAAc,CAACS,KAAK,CAAC+H,KAAK,EAAE;QAC9B,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACD,MAAMC,aAAa,GAAG,MAAM;MAC1BzI,cAAc,CAACS,KAAK,GAAG0H,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,SAASC,aAAa,GAAG;QAC1E,IAAI,CAACtE,EAAE,CAAC,MAAM,EAAE,UAAUuE,CAAC,EAAE;UAC3BtI,cAAc,CAACU,KAAK,CAAC6H,IAAI,EAAE;UAC3Bd,sBAAsB,CAAC,IAAI,CAAC;UAC5Bd,sBAAsB,CAAC,IAAI,CAAC;UAC5BxG,WAAW,CAACO,KAAK,GAAG,KAAK;UACzB,IAAI,CAAC8H,MAAM,CAAC,CAAC,CAAC;UACdxI,cAAc,CAACU,KAAK,CAAC8H,MAAM,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC;QACF,IAAI,CAACzE,EAAE,CAAC,YAAY,EAAE,UAAUuE,CAAC,EAAE;UACjC3B,sBAAsB,CAAC,IAAI,CAAC;UAC5Bc,sBAAsB,CAAC,IAAI,CAAC;QAC9B,CAAC,CAAC;QACF,IAAI,CAAC1D,EAAE,CAAC,QAAQ,EAAE,YAAY;UAC5BmE,cAAc,GAAG,KAAK;UACtB,IAAID,cAAc,EAAE;YAClB,IAAIjB,OAAO,GAAG,IAAI,CAACC,WAAW,EAAE;YAChCjH,cAAc,CAACU,KAAK,CAACuG,WAAW,CAACD,OAAO,CAAC;UAC3C;UACAiB,cAAc,IAAI,IAAI;UACtBb,CAAC,CAAE,mCAAkC,CAAC,CAACC,GAAG,CAAC;YACzCC,UAAU,EAAE;UACd,CAAC,CAAC;UACFO,cAAc,EAAE;QAClB,CAAC,CAAC;QACF,IAAI,CAAC9D,EAAE,CAAC,OAAO,EAAE,YAAY;UAC3B5D,WAAW,CAACO,KAAK,GAAG,IAAI;UACxBV,cAAc,CAACU,KAAK,CAAC+H,KAAK,EAAE;QAC9B,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAED,MAAME,mBAAmB,GAAGrJ,GAAG,CAAC,CAC9B;MAAE2B,KAAK,EAAE,UAAU;MAAEP,KAAK,EAAE;IAAW,CAAC,EACxC;MAAEO,KAAK,EAAE,UAAU;MAAEP,KAAK,EAAE;IAAW,CAAC,CACzC,CAAC;IAEF,MAAMkI,eAAe,GAAGtJ,GAAG,CAAC,UAAU,CAAC;IACvC,MAAMuJ,aAAa,GAAG,MAAM;MAC1B5I,cAAc,CAACS,KAAK,CAACuG,WAAW,CAAC,CAAC,CAAC;MACnCjH,cAAc,CAACU,KAAK,CAACuG,WAAW,CAAC,CAAC,CAAC;MACnCzD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACwB,QAAQ,CAAC/D,IAAI,CAAC,CAAC,CAAC,CAACwE,KAAK,GAAG,CAAC;MAC3ChC,OAAO,CAACC,SAAS,CAACH,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;MACvCvD,cAAc,CAACS,KAAK,CAACoI,OAAO,EAAE;MAC9B,IAAI7E,GAAG,GAAG1D,QAAQ,CAACG,KAAK;MACxB,IAAIkI,eAAe,CAAClI,KAAK,IAAI,UAAU,EAAE;QACvCuD,GAAG,GAAG5D,KAAK,CAAC0I,eAAe;MAC7B;MACA,IAAIC,IAAI,GACN,wGAAwG,GACxG/E,GAAG,GACH,+BAA+B;MACjCI,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC,CAAC2E,SAAS,GAAGD,IAAI;MACjEN,aAAa,EAAE;MACf1F,kBAAkB,CAACtC,KAAK,GAAG,KAAK;MAChCwI,UAAU,CAAC,MAAM;QACflG,kBAAkB,CAACtC,KAAK,GAAG,IAAI;QAC/BwI,UAAU,CAAC,MAAM;UACflF,aAAa,CAACC,GAAG,CAAC;QACpB,CAAC,EAAE,CAAC,CAAC;MACP,CAAC,EAAE,CAAC,CAAC;IACP,CAAC;IACD,MAAMkF,kBAAkB,GAAIC,QAAQ,IAAK;MACvChC,CAAC,CAAE,mCAAkC,CAAC,CAACC,GAAG,CAAC;QACzCC,UAAU,EAAE;MACd,CAAC,CAAC;MACF,IAAI8B,QAAQ,IAAI,IAAI,EAAE;QACpBF,UAAU,CAAC,MAAM;UACflJ,cAAc,CAACU,KAAK,CAACuG,WAAW,CAC9BnH,kBAAkB,CAACY,KAAK,CAAC2I,cAAc,EAAE,GAAG,QAAQ,CACrD;QACH,CAAC,EAAE,CAAC,CAAC;MACP,CAAC,MAAM;QACLrJ,cAAc,CAACU,KAAK,CAACuG,WAAW,CAACmC,QAAQ,GAAG,QAAQ,CAAC;MACvD;IACF,CAAC;IACD,MAAME,kBAAkB,GAAIF,QAAQ,IAAK;MACvCvB,cAAc,EAAE;MAChB,IAAIuB,QAAQ,IAAI,IAAI,EAAE;QACpBF,UAAU,CAAC,MAAM;UACfjJ,cAAc,CAACS,KAAK,CAACuG,WAAW,CAC9BlH,kBAAkB,CAACW,KAAK,CAAC2I,cAAc,EAAE,GAAG,QAAQ,CACrD;QACH,CAAC,EAAE,CAAC,CAAC;MACP,CAAC,MAAM;QACLpJ,cAAc,CAACS,KAAK,CAACuG,WAAW,CAACmC,QAAQ,GAAG,QAAQ,CAAC;MACvD;IACF,CAAC;IACD5J,SAAS,CAAC,MAAM;MACdoE,aAAa,EAAE;MACfI,aAAa,CAACzD,QAAQ,CAACG,KAAK,CAAC;MAC7ByD,WAAW,EAAE;MACbgE,aAAa,EAAE;MACfO,aAAa,EAAE;IACjB,CAAC,CAAC;IAEF,MAAMa,SAAS,GAAIzE,IAAI,IAAK;MAC1B,IAAIA,IAAI,IAAI,MAAM,EAAE;QAClB,IAAI5E,WAAW,CAACQ,KAAK,IAAI,GAAG,EAAE;UAC5BP,WAAW,CAACO,KAAK,GACbT,cAAc,CAACS,KAAK,CAAC6H,IAAI,EAAE,GAC3BtI,cAAc,CAACS,KAAK,CAAC+H,KAAK,EAAE;UAChCtI,WAAW,CAACO,KAAK,GAAG,CAACP,WAAW,CAACO,KAAK;QACxC;MACF,CAAC,MAAM,IAAIoE,IAAI,IAAI,OAAO,EAAE;QAC1B7E,cAAc,CAACS,KAAK,CAACuG,WAAW,CAAC,CAAC,CAAC;QACnCzD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACwB,QAAQ,CAAC/D,IAAI,CAAC,CAAC,CAAC,CAACwE,KAAK,GAAG,CAAC;QAC3ChC,OAAO,CAACC,SAAS,CACf;UACEF,MAAM,EAAED,MAAM,CAACC;QACjB,CAAC,EACD,KAAK,EACL,KAAK,CACN;MACH,CAAC,MAAM,IAAIqB,IAAI,IAAI,KAAK,EAAE;QACxB7E,cAAc,CAACS,KAAK,CAACuG,WAAW,CAAC3G,QAAQ,CAACI,KAAK,GAAG,QAAQ,CAAC;QAC3D8C,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACwB,QAAQ,CAAC/D,IAAI,CAAC,CAAC,CAAC,CAACwE,KAAK,GAAGrF,KAAK,CAACD,QAAQ,CAACmD,MAAM,GAAG,CAAC;QACnEG,OAAO,CAACC,SAAS,CACf;UACEF,MAAM,EAAED,MAAM,CAACC;QACjB,CAAC,EACD,KAAK,EACL,KAAK,CACN;MACH,CAAC,MAAM,IAAIqB,IAAI,IAAI,MAAM,EAAE;QACzB,IACE0B,iBAAiB,CAAC9F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACxC,GAAG,EACvE;UACAd,cAAc,CAACS,KAAK,CAACuG,WAAW,CAC9B7G,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACzC,KAAK,GAAG,QAAQ,CAC3D;QACH,CAAC,MAAM,IACL0F,iBAAiB,CAAC9F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACzC,KAAK,EACzE;UACAb,cAAc,CAACS,KAAK,CAACuG,WAAW,CAC9B7G,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACzC,KAAK,GAAG,QAAQ,CAC3D;QACH,CAAC,MAAM,IACL0F,iBAAiB,CAAC9F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACzC,KAAK,EACzE;UACA,IAAIkH,SAAS,GAAG,CAAC;UACjB,KAAK,IAAIR,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGpH,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAEiE,KAAK,EAAE,EAAE;YAC1D,IACEpH,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAAC1G,KAAK,GAAG0F,iBAAiB,CAAC9F,KAAK,IACrD8F,iBAAiB,CAAC9F,KAAK,IAAIN,QAAQ,CAACM,KAAK,CAAC8G,KAAK,GAAG,CAAC,CAAC,CAAC1G,KAAK,EAC1D;cACA,IAAI0G,KAAK,EAAE;gBACTQ,SAAS,GAAG5H,QAAQ,CAACM,KAAK,CAAC8G,KAAK,GAAG,CAAC,CAAC,CAAC1G,KAAK,GAAG,QAAQ;cACxD;cACA;YACF;UACF;UACAb,cAAc,CAACS,KAAK,CAACuG,WAAW,CAACe,SAAS,CAAC;QAC7C;MACF,CAAC,MAAM,IAAIlD,IAAI,IAAI,MAAM,EAAE;QACzB,IAAI0B,iBAAiB,CAAC9F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,EAAE;UACrDb,cAAc,CAACS,KAAK,CAACuG,WAAW,CAAC7G,QAAQ,CAACM,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,GAAG,QAAQ,CAAC;QACtE,CAAC,MAAM,IACL0F,iBAAiB,CAAC9F,KAAK,GAAGN,QAAQ,CAACM,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC6C,MAAM,GAAG,CAAC,CAAC,CAACzC,KAAK,EACzE;UACA,IAAIkH,SAAS,GAAG,CAAC;UACjB,KAAK,IAAIR,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGpH,QAAQ,CAACM,KAAK,CAAC6C,MAAM,EAAEiE,KAAK,EAAE,EAAE;YAC1D,IACEpH,QAAQ,CAACM,KAAK,CAAC8G,KAAK,CAAC,CAAC1G,KAAK,GAAG0F,iBAAiB,CAAC9F,KAAK,IACrD8F,iBAAiB,CAAC9F,KAAK,IAAIN,QAAQ,CAACM,KAAK,CAAC8G,KAAK,GAAG,CAAC,CAAC,CAAC1G,KAAK,EAC1D;cACAkH,SAAS,GAAG5H,QAAQ,CAACM,KAAK,CAAC8G,KAAK,GAAG,CAAC,CAAC,CAAC1G,KAAK,GAAG,QAAQ;cACtD;YACF;UACF;UACAb,cAAc,CAACS,KAAK,CAACuG,WAAW,CAACe,SAAS,CAAC;QAC7C;MACF;IACF,CAAC;IACD,MAAMwB,YAAY,GAAIlB,CAAC,IAAK;MAC1BrI,cAAc,CAACS,KAAK,CAACuG,WAAW,CAC7B/G,WAAW,CAACQ,KAAK,GAAG,GAAG,GAAIJ,QAAQ,CAACI,KAAK,GAAG,QAAQ,CACtD;IACH,CAAC;IACD,MAAM+I,aAAa,GAAInB,CAAC,IAAK;MAC3B,OAAOoB,IAAI,CAACC,KAAK,CAAErB,CAAC,GAAG,GAAG,GAAIhI,QAAQ,CAACI,KAAK,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG;IACjE,CAAC","names":["ref","computed","onMounted","OperationMethod","TableModified","echarts","modifiedWave","originalWaveform","originalWavesurfer","modifiedWavesurfer","originalPlayer","modifiedPlayer","sliderValue","mediaPaused","textList","props","duration","videoUrl","regions","dataList","value","forEach","item","itemdata","start","end","attributes","label","data","note","loop","drag","resize","color","handleStyle","push","labelResult","original","modified","defended","account","viewResults","result","undefined","Number","toFixed","middleResult","editAligned","originalVideoUrl","methodList","methodValue","methodDetailList","detailList","feature","indexOf","methodDetailValue","boxItemTip","echartsDataChange","modifiedWaveSwitch","chooseClick","t","originalSeriesDate","modifiedSeriesDate","defendedSeriesDate","i","length","option","series","myChart","setOption","originalEvent","waveformCreate","load","on","modifiedEvent","url","dragBackgroundColor","chartCreate","chartDom","document","getElementById","init","xAxisData","defenceSeriesDate","text","id","optionData","optionSeries","type","name","animation","markLine","symbol","position","textStyle","fontSize","formatter","params","silent","lineStyle","xAxis","legend","icon","orient","itemHeight","right","top","show","axisLabel","interval","tooltip","trigger","backgroundColor","yAxis","modifiedVideoTime","originalVideoTime","dialogScores","originalVideoTimeEvent","that","count","timer","setInterval","nowTime","currentTime","clearInterval","seekAndCenter","$","css","background","watchSwitch","index","modifiedVideoTimeEvent","watchVideo","echartTimeOffset","lastword","hightLightInit","highlightOver","textBackground","videoTime","originalLocked","modifiedLocked","originalVideo","videojs","onPlayerReady","e","play","volume","pause","modifiedVideo","modifiedDefenceList","modifiedDefence","defenceChange","dispose","defenceVideoUrl","html","innerHTML","setTimeout","originalSeekToTime","textitem","getCurrentTime","modifiedSeekToTime","playVideo","sliderChange","formatTooltip","Math","floor"],"sources":["/home/zhangbaozheng/emotional/Robust-MSA/vue3/src/components/ViewResult.vue"],"sourcesContent":["<template>\n  <div class=\"viewResultContainer\">\n    <div class=\"topContainer\">\n      <div class=\"videoContainer\">\n        <div class=\"labelContainer\" style=\"margintop: 2px\">\n          <span class=\"labelTitle\">Original:</span>\n          <el-tooltip\n            class=\"box-item\"\n            effect=\"dark\"\n            content=\"click to view scores from each model\"\n            placement=\"right\"\n          >\n            <span\n              class=\"labelContent\"\n              v-if=\"labelResult.original > 0.5\"\n              style=\"color: rgb(60, 190, 158)\"\n              @click=\"dialogScores = !dialogScores\"\n              >Positive</span\n            >\n            <span\n              class=\"labelContent\"\n              v-else-if=\"labelResult.original >= -0.5\"\n              style=\"color: rgb(172, 175, 2)\"\n              @click=\"dialogScores = !dialogScores\"\n              >Neutral</span\n            >\n            <span\n              class=\"labelContent\"\n              v-else\n              style=\"color: rgb(241, 76, 76)\"\n              @click=\"dialogScores = !dialogScores\"\n              >Negative</span\n            >\n          </el-tooltip>\n        </div>\n        <div class=\"viewOriginal\">\n          <video\n            id=\"viewOriginal\"\n            class=\"video-js vjs-big-play-centered\"\n            controls\n            data-setup=\"{}\"\n          >\n            <source :src=\"originalVideoUrl\" type=\"video/mp4\" />\n          </video>\n        </div>\n        <div class=\"viewModified\" id=\"viewModifiedContainer\">\n          <video\n            id=\"viewModified\"\n            class=\"video-js vjs-big-play-centered\"\n            controls\n            data-setup=\"{}\"\n          >\n            <source :src=\"videoUrl\" type=\"video/mp4\" />\n          </video>\n        </div>\n        <div class=\"labelContainer\" style=\"margintop: 10px\">\n          <span\n            class=\"labelTitle\"\n            v-if=\"viewResults.result.defended == undefined\"\n            >Modified:</span\n          >\n          <el-select\n            v-else\n            v-model=\"modifiedDefence\"\n            @change=\"defenceChange\"\n            class=\"modifiedDefence\"\n          >\n            <el-option\n              v-for=\"item in modifiedDefenceList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n          <el-tooltip\n            class=\"box-item\"\n            effect=\"dark\"\n            content=\"click to view scores from each model\"\n            placement=\"right\"\n          >\n            <div v-if=\"modifiedDefence == 'Modified'\">\n              <span\n                class=\"labelContent\"\n                v-if=\"labelResult.modified > 0.5\"\n                style=\"color: rgb(60, 190, 158)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Positive</span\n              >\n              <span\n                class=\"labelContent\"\n                v-else-if=\"labelResult.modified >= -0.5\"\n                style=\"color: rgb(172, 175, 2)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Neutral</span\n              >\n              <span\n                class=\"labelContent\"\n                v-else\n                style=\"color: rgb(241, 76, 76)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Negative</span\n              >\n            </div>\n            <div v-else>\n              <span\n                class=\"labelContent\"\n                v-if=\"labelResult.defended > 0.5\"\n                style=\"color: rgb(60, 190, 158)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Positive</span\n              >\n              <span\n                class=\"labelContent\"\n                v-else-if=\"labelResult.defended >= -0.5\"\n                style=\"color: rgb(172, 175, 2)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Neutral</span\n              >\n              <span\n                class=\"labelContent\"\n                v-else\n                style=\"color: rgb(241, 76, 76)\"\n                @click=\"dialogScores = !dialogScores\"\n                >Negative</span\n              >\n            </div>\n          </el-tooltip>\n        </div>\n      </div>\n      <div class=\"featureContainer\">\n        <div class=\"selectContainer\">\n          <div class=\"selectTitle\">Choose feature to view:</div>\n          <el-select\n            v-model=\"methodValue\"\n            @change=\"chooseClick('one')\"\n            class=\"methodOne\"\n          >\n            <el-option\n              v-for=\"item in methodList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n          <el-select\n            v-model=\"methodDetailValue\"\n            @change=\"chooseClick('two')\"\n            class=\"methodTwo\"\n          >\n            <el-option\n              v-for=\"item in methodDetailList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n          <el-tooltip class=\"box-item\" effect=\"dark\" placement=\"right-start\">\n            <template #content>\n              <div class=\"boxItemTip\">{{ boxItemTip }}</div>\n            </template>\n            <el-icon class=\"questionFilled\">\n              <QuestionFilled />\n            </el-icon>\n          </el-tooltip>\n        </div>\n        <div class=\"waveform\">\n          <div id=\"originalWaveTimeline\" ref=\"originalWaveTimeline\"></div>\n          <div\n            id=\"originalWaveform\"\n            @click=\"originalSeekToTime(null)\"\n            ref=\"originalWaveform\"\n          ></div>\n        </div>\n        <div style=\"position: relative\">\n          <div\n            id=\"main\"\n            style=\"width: 550px; height: 350px; margintop: -10px\"\n          ></div>\n        </div>\n        <div\n          class=\"waveform\"\n          v-if=\"modifiedWaveSwitch\"\n          style=\"margintop: -30px\"\n        >\n          <div id=\"modifiedTimeline\" ref=\"modifiedTimeline\"></div>\n          <div\n            id=\"modifiedWave\"\n            @click=\"modifiedSeekToTime(null)\"\n            ref=\"modifiedWave\"\n          ></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"bottomContainer\">\n      <div class=\"textContent\">\n        <span\n          @mouseenter=\"\n            textOver(\n              $event,\n              index,\n              'rgba(255, 228, 196, 0.5)',\n              'rgba(255, 228, 196, 0.5)'\n            )\n          \"\n          @mouseleave=\"\n            textOver($event, index, 'rgba(181, 198, 241, 0.2)', '#fff')\n          \"\n          @click=\"modifiedSeekToTime(textitem.start)\"\n          v-for=\"(textitem, index) in textList\"\n          :key=\"textitem\"\n          :id=\"index\"\n          >{{ textitem.text }}</span\n        >\n      </div>\n      <div class=\"audioContainer\">\n        <el-slider\n          v-model=\"sliderValue\"\n          :format-tooltip=\"formatTooltip\"\n          @input=\"sliderChange\"\n        />\n        <div class=\"control\">\n          <svg\n            t=\"1662145678112\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            @click=\"playVideo('start')\"\n            p-id=\"2970\"\n            width=\"128\"\n            height=\"128\"\n          >\n            <path\n              d=\"M554.666667 512a53.44 53.44 0 0 0 17.4 39.413333l362.666666 330.6a52.833333 52.833333 0 0 0 35.713334 14 53.84 53.84 0 0 0 21.76-4.666666 52.666667 52.666667 0 0 0 31.793333-48.793334V181.406667A53.333333 53.333333 0 0 0 934.74 142l-362.666667 330.6A53.44 53.44 0 0 0 554.666667 512z m-451.933334-39.413333l362.666667-330.6A53.333333 53.333333 0 0 1 554.666667 181.406667v661.186666a52.666667 52.666667 0 0 1-31.793334 48.793334 53.84 53.84 0 0 1-21.76 4.666666 52.833333 52.833333 0 0 1-35.713333-14l-362.666667-330.6a53.333333 53.333333 0 0 1 0-78.826666zM0 874.666667V149.333333a21.333333 21.333333 0 0 1 42.666667 0v725.333334a21.333333 21.333333 0 0 1-42.666667 0z\"\n              fill=\"#5C5C66\"\n              p-id=\"2971\"\n            />\n          </svg>\n          <svg\n            t=\"1662145745021\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            @click=\"playVideo('last')\"\n            p-id=\"4610\"\n            width=\"128\"\n            height=\"128\"\n          >\n            <path\n              d=\"M213.333333 512a52.92 52.92 0 0 0 25.78 45.666667l618.666667 373.28a53.333333 53.333333 0 0 0 80.886667-45.666667V138.72a53.333333 53.333333 0 0 0-80.886667-45.666667L239.133333 466.333333A52.92 52.92 0 0 0 213.333333 512z m-128 405.333333V106.666667a21.333333 21.333333 0 0 1 42.666667 0v810.666666a21.333333 21.333333 0 0 1-42.666667 0z\"\n              fill=\"#5C5C66\"\n              p-id=\"4611\"\n            />\n          </svg>\n          <svg\n            t=\"1662146562563\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            v-if=\"mediaPaused\"\n            @click=\"playVideo('play')\"\n            p-id=\"7407\"\n            width=\"128\"\n            height=\"128\"\n          >\n            <path\n              d=\"M128 138.666667c0-47.232 33.322667-66.666667 74.176-43.562667l663.146667 374.954667c40.96 23.168 40.853333 60.8 0 83.882666L202.176 928.896C161.216 952.064 128 932.565333 128 885.333333v-746.666666z\"\n              fill=\"#3D3D3D\"\n              p-id=\"7408\"\n            />\n          </svg>\n          <svg\n            v-else\n            t=\"1662554869612\"\n            @click=\"playVideo('play')\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            p-id=\"2207\"\n            width=\"128\"\n            height=\"128\"\n          >\n            <path\n              d=\"M426.666667 138.666667v746.666666a53.393333 53.393333 0 0 1-53.333334 53.333334H266.666667a53.393333 53.393333 0 0 1-53.333334-53.333334V138.666667a53.393333 53.393333 0 0 1 53.333334-53.333334h106.666666a53.393333 53.393333 0 0 1 53.333334 53.333334z m330.666666-53.333334H650.666667a53.393333 53.393333 0 0 0-53.333334 53.333334v746.666666a53.393333 53.393333 0 0 0 53.333334 53.333334h106.666666a53.393333 53.393333 0 0 0 53.333334-53.333334V138.666667a53.393333 53.393333 0 0 0-53.333334-53.333334z\"\n              fill=\"#5C5C66\"\n              p-id=\"2208\"\n            />\n          </svg>\n          <svg\n            t=\"1662145758367\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            @click=\"playVideo('next')\"\n            p-id=\"5545\"\n            width=\"128\"\n            height=\"128\"\n          >\n            <path\n              d=\"M810.666667 512a52.92 52.92 0 0 1-25.78 45.666667l-618.666667 373.28a53.333333 53.333333 0 0 1-80.886667-45.666667V138.72a53.333333 53.333333 0 0 1 80.886667-45.666667l618.666667 373.28A52.92 52.92 0 0 1 810.666667 512z m128 405.333333V106.666667a21.333333 21.333333 0 0 0-42.666667 0v810.666666a21.333333 21.333333 0 0 0 42.666667 0z\"\n              fill=\"#5C5C66\"\n              p-id=\"5546\"\n            />\n          </svg>\n          <svg\n            t=\"1662145724176\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            p-id=\"3756\"\n            width=\"128\"\n            height=\"128\"\n            @click=\"playVideo('end')\"\n          >\n            <path\n              d=\"M469.335173 512a53.44 53.44 0 0 1-17.4 39.413333L89.268507 882a52.833333 52.833333 0 0 1-35.713334 14 53.84 53.84 0 0 1-21.76-4.666667A52.666667 52.666667 0 0 1 0.00184 842.593333V181.406667a52.666667 52.666667 0 0 1 31.793333-48.793334 52.666667 52.666667 0 0 1 57.466667 9.386667l362.666667 330.6A53.44 53.44 0 0 1 469.335173 512z m451.933334-39.413333L558.595173 142A53.333333 53.333333 0 0 0 469.335173 181.406667v661.186666a52.666667 52.666667 0 0 0 31.793334 48.793334 53.84 53.84 0 0 0 21.76 4.666666 52.833333 52.833333 0 0 0 35.713333-14l362.666667-330.6a53.333333 53.333333 0 0 0 0-78.826666zM1024.00184 874.666667V149.333333a21.333333 21.333333 0 0 0-42.666667 0v725.333334a21.333333 21.333333 0 0 0 42.666667 0z\"\n              fill=\"#5C5C66\"\n              p-id=\"3757\"\n            />\n          </svg>\n        </div>\n      </div>\n      <el-divider />\n      <TableModified :editAligned=\"editAligned\" :onlyDisplay=\"true\" />\n    </div>\n    <el-dialog v-model=\"dialogScores\" title=\"Model Scores\" width=\"650px\">\n      <div class=\"dialogContainer\">\n        <div class=\"dialogScoresContainer\">\n          <div>Original</div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.original.MMIN != undefined\"\n          >\n            <div class=\"dialogTitle\">MMIN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.original.MMIN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.original.tfn < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.original.MMIN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.original.TFR_Net != undefined\"\n          >\n            <div class=\"dialogTitle\">TFR-Net:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.original.TFR_Net < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.original.lmf < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.original.TFR_Net\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.original.T2FN != undefined\"\n          >\n            <div class=\"dialogTitle\">T2FN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.original.T2FN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.original.bert_mag < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.original.T2FN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.original.TPFN != undefined\"\n          >\n            <div class=\"dialogTitle\">TPFN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.original.TPFN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.original.misa < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.original.TPFN\"\n            />\n          </div>\n          <div class=\"dialogItem\" v-if=\"labelResult.original != undefined\">\n            <div class=\"dialogTitle\">Average:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  labelResult.original < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : labelResult.original < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"labelResult.original\"\n            />\n          </div>\n        </div>\n        <div class=\"dialogScoresContainer\">\n          <div>Modified</div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.modified.MMIN != undefined\"\n          >\n            <div class=\"dialogTitle\">MMIN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.modified.MMIN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.modified.MMIN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.modified.MMIN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.modified.TFR_Net != undefined\"\n          >\n            <div class=\"dialogTitle\">TFR-Net:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.modified.TFR_Net < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.modified.TFR_Net < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.modified.TFR_Net\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.modified.T2FN != undefined\"\n          >\n            <div class=\"dialogTitle\">T2FN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.modified.T2FN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.modified.T2FN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.modified.T2FN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.modified.TPFN != undefined\"\n          >\n            <div class=\"dialogTitle\">TPFN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.modified.TPFN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.modified.TPFN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.modified.TPFN\"\n            />\n          </div>\n\n          <div class=\"dialogItem\" v-if=\"labelResult.modified != undefined\">\n            <div class=\"dialogTitle\">Average:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  labelResult.modified < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : labelResult.modified < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"labelResult.modified\"\n            />\n          </div>\n        </div>\n        <div\n          class=\"dialogScoresContainer\"\n          v-if=\"viewResults.result.defended != undefined\"\n        >\n          <div>Defended</div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.defended.MMIN != undefined\"\n          >\n            <div class=\"dialogTitle\">MMIN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.defended.MMIN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.defended.MMIN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.defended.MMIN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.defended.TFR_Net != undefined\"\n          >\n            <div class=\"dialogTitle\">TFR-Net:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.defended.TFR_Net < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.defended.lmf < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.defended.TFR_Net\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.defended.T2FN != undefined\"\n          >\n            <div class=\"dialogTitle\">T2FN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.defended.T2FN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.defended.T2FN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.defended.T2FN\"\n            />\n          </div>\n          <div\n            class=\"dialogItem\"\n            v-if=\"viewResults.result.defended.TPFN != undefined\"\n          >\n            <div class=\"dialogTitle\">TPFN:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  viewResults.result.defended.TPFN < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : viewResults.result.defended.TPFN < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"viewResults.result.defended.TPFN\"\n            />\n          </div>\n          <div class=\"dialogItem\" v-if=\"labelResult.defended != undefined\">\n            <div class=\"dialogTitle\">Average:</div>\n            <el-input\n              :style=\"{\n                backgroundColor:\n                  labelResult.defended < -0.5\n                    ? 'rgba(241, 76, 76, 0.1)'\n                    : labelResult.defended < 0.5\n                    ? 'rgba(172, 175, 2, 0.1)'\n                    : 'rgba(60, 190, 157, 0.1)',\n              }\"\n              readonly\n              v-model=\"labelResult.defended\"\n            />\n          </div>\n        </div>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"primary\" @click=\"dialogScores = false\"\n            >Confirm</el-button\n          >\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport OperationMethod from \"@/utils/operation.js\";\nimport TableModified from \"@/components/TableModified.vue\";\nimport * as echarts from \"echarts\";\nconst modifiedWave = ref(null);\nconst originalWaveform = ref(null);\nconst originalWavesurfer = ref(null);\nconst modifiedWavesurfer = ref(null);\nconst originalPlayer = ref(null);\nconst modifiedPlayer = ref(null);\nconst sliderValue = ref(0);\nconst mediaPaused = ref(true);\nconst props = defineProps({\n  textList: Array,\n  duration: Number,\n  videoUrl: String,\n  originalVideoUrl: String,\n  editAligned: Array,\n  methodData: Object,\n  viewResults: Object,\n  defenceVideoUrl: String,\n});\nconst textList = computed(() => {\n  return props.textList;\n});\nconst duration = computed(() => {\n  return props.duration;\n});\nconst videoUrl = computed(() => {\n  return props.videoUrl;\n});\nconst regions = computed(() => {\n  let dataList = [];\n  textList.value.forEach((item) => {\n    let itemdata = {\n      start: 0,\n      end: 0,\n      attributes: {\n        label: \"\",\n      },\n      data: {\n        note: \"\",\n      },\n      loop: false,\n      drag: false,\n      resize: false,\n      color: \"rgba(181, 198, 241, 0.2)\",\n      handleStyle: false,\n    };\n    itemdata.start = item.start;\n    itemdata.end = item.end;\n    dataList.push(itemdata);\n  });\n  return dataList;\n});\nconst labelResult = computed(() => {\n  var labelResult = {\n    original: 0,\n    modified: 0,\n    defended: 0,\n  };\n  var account = 0;\n  for (let item in props.viewResults.result.original) {\n    labelResult.original += props.viewResults.result.original[item];\n    labelResult.modified += props.viewResults.result.modified[item];\n    if (props.viewResults.result.defended != undefined) {\n      labelResult.defended += props.viewResults.result.defended[item];\n    }\n    account++;\n  }\n  labelResult.original = Number((labelResult.original / account).toFixed(3));\n  labelResult.modified = Number((labelResult.modified / account).toFixed(3));\n  labelResult.defended = Number((labelResult.defended / account).toFixed(3));\n  return labelResult;\n});\nconst viewResults = computed(() => {\n  let middleResult = props.viewResults;\n  for (let item in middleResult.result.original) {\n    middleResult.result.original[item] = Number(\n      middleResult.result.original[item].toFixed(3)\n    );\n    middleResult.result.modified[item] = Number(\n      middleResult.result.modified[item].toFixed(3)\n    );\n    if (middleResult.result.defended != undefined) {\n      middleResult.result.defended[item] = Number(\n        middleResult.result.defended[item].toFixed(3)\n      );\n    }\n  }\n  return middleResult;\n});\nconst editAligned = computed(() => {\n  return props.editAligned;\n});\nconst originalVideoUrl = computed(() => {\n  return props.originalVideoUrl;\n});\nconst methodList = ref([\n  {\n    value: \"audio\",\n    label: \"Audio\",\n  },\n  {\n    value: \"video\",\n    label: \"Video\",\n  },\n]);\nconst methodValue = ref(\"audio\");\nconst methodDetailList = computed(() => {\n  var detailList = [];\n  for (let item in props.viewResults.feature.original) {\n    if (item.indexOf(\"AU\") == -1 && methodValue.value == \"audio\") {\n      detailList.push({\n        value: item,\n        label: item,\n      });\n    } else if (item.indexOf(\"AU\") != -1 && methodValue.value == \"video\") {\n      detailList.push({\n        value: item,\n        label: item,\n      });\n    }\n  }\n  return detailList;\n});\nconst methodDetailValue = ref(methodDetailList.value[0].value);\nconst boxItemTip = computed(() => {\n  return OperationMethod.echartsDataChange(methodDetailValue.value);\n});\nconst modifiedWaveSwitch = ref(true);\n\nconst chooseClick = (t) => {\n  if (t == \"one\") {\n    methodDetailValue.value = methodDetailList.value[0].value;\n  }\n  var originalSeriesDate = [];\n  var modifiedSeriesDate = [];\n  var defendedSeriesDate = [];\n  for (let i = 0; i < textList.value.length; i++) {\n    originalSeriesDate.push(\n      viewResults.value.feature.original[methodDetailValue.value][i]\n    );\n    modifiedSeriesDate.push(\n      viewResults.value.feature.modified[methodDetailValue.value][i]\n    );\n    if (props.viewResults.feature.defended != undefined) {\n      defendedSeriesDate.push(\n        viewResults.value.feature.defended[methodDetailValue.value][i]\n      );\n    }\n  }\n  option.series[0].data = originalSeriesDate;\n  option.series[1].data = modifiedSeriesDate;\n  if (props.viewResults.feature.defended != undefined) {\n    option.series[2].data = defendedSeriesDate;\n  }\n\n  myChart.setOption(option, false, false);\n};\nconst originalEvent = () => {\n  originalWavesurfer.value = OperationMethod.waveformCreate(\n    \"#originalWaveform\",\n    regions.value,\n    \"#originalWaveTimeline\"\n  );\n  originalWavesurfer.value.load(originalVideoUrl.value);\n  originalWavesurfer.value.on(\"ready\", () => {});\n};\nconst modifiedEvent = (url) => {\n  modifiedWavesurfer.value = OperationMethod.waveformCreate(\n    \"#modifiedWave\",\n    regions.value,\n    \"#modifiedTimeline\"\n  );\n  modifiedWavesurfer.value.load(url);\n  modifiedWavesurfer.value.on(\"ready\", () => {\n    OperationMethod.dragBackgroundColor(\n      editAligned.value,\n      textList.value.length\n    );\n  });\n};\nvar myChart = null;\nvar option = null;\nconst chartCreate = () => {\n  var chartDom = document.getElementById(\"main\");\n  myChart = echarts.init(chartDom);\n  var xAxisData = [];\n  var originalSeriesDate = [];\n  var modifiedSeriesDate = [];\n  var defenceSeriesDate = [];\n  for (let i = 0; i < textList.value.length; i++) {\n    xAxisData.push({ value: textList.value[i].text, id: i });\n    originalSeriesDate.push(\n      viewResults.value.feature.original[methodDetailValue.value][i]\n    );\n    modifiedSeriesDate.push(\n      viewResults.value.feature.modified[methodDetailValue.value][i]\n    );\n    if (props.viewResults.feature.defended != undefined) {\n      defenceSeriesDate.push(\n        viewResults.value.feature.defended[methodDetailValue.value][i]\n      );\n    }\n  }\n  var optionData = [\"Original\", \"Modified\"];\n  var optionSeries = [\n    {\n      data: originalSeriesDate,\n      type: \"line\",\n      name: \"Original\",\n      color: [\"#e69d87\"],\n      animation: false,\n      markLine: {\n        symbol: \"none\",\n        label: {\n          position: \"start\",\n          textStyle: {\n            fontSize: 16,\n          },\n          formatter: function (params) {\n            return textList.value[params.value].text;\n          },\n        },\n        data: [\n          {\n            silent: false,\n            lineStyle: {\n              type: \"line\",\n              color: \"#505050\",\n            },\n\n            xAxis: 0,\n          },\n        ],\n      },\n    },\n    {\n      data: modifiedSeriesDate,\n      type: \"line\",\n      name: \"Modified\",\n      color: [\"#8dc1a9\"],\n    },\n  ];\n  if (props.viewResults.feature.defended != undefined) {\n    optionData.push(\"Defended\");\n    optionSeries.push({\n      data: defenceSeriesDate,\n      type: \"line\",\n      name: \"Defended\",\n      color: [\"#51abff\"],\n    });\n  }\n  option = {\n    legend: {\n      icon: \"roundRect\",\n      orient: \"horizontal\",\n      itemHeight: 2,\n      data: optionData,\n      right: 50,\n      top: 25,\n    },\n    xAxis: {\n      type: \"category\",\n      show: false,\n      data: xAxisData,\n      axisLabel: { interval: \"auto\" },\n    },\n    tooltip: {\n      trigger: \"axis\",\n      backgroundColor: \"#000000\",\n      textStyle: {\n        color: \"#ffffff\",\n      },\n      formatter: function (params) {\n        return params[0].name;\n      },\n    },\n    yAxis: {\n      type: \"value\",\n    },\n    series: optionSeries,\n  };\n  option && myChart.setOption(option, false, false);\n};\nconst modifiedVideoTime = ref(0);\nconst originalVideoTime = ref(0);\nconst dialogScores = ref(false);\nconst originalVideoTimeEvent = (that) => {\n  let count = 10;\n  let timer = setInterval(() => {\n    let nowTime = that.currentTime();\n    if (nowTime >= duration.value) {\n      clearInterval(timer);\n      return;\n    }\n    originalVideoTime.value = nowTime;\n    originalWavesurfer.value.seekAndCenter(\n      originalVideoTime.value / duration.value > 1\n        ? 1\n        : originalVideoTime.value / duration.value\n    );\n    if (\n      originalVideoTime.value > textList.value[textList.value.length - 1].end\n    ) {\n      $(`#originalWaveform > wave > region`).css({\n        background: \"rgba(181, 198, 241, 0.2)\",\n      });\n    } else {\n      let watchSwitch = true;\n      for (let index = 0; index < textList.value.length; index++) {\n        if (\n          textList.value[index].start < originalVideoTime.value &&\n          originalVideoTime.value <= textList.value[index].end\n        ) {\n          $(`#originalWaveform > wave > region:nth-child(${index + 2})`).css({\n            background: \"rgba(181, 198, 241, 0.2)\",\n          });\n          $(`#originalWaveform > wave > region:nth-child(${index + 3})`).css({\n            background: \"rgba(255, 228, 196, 0.5)\",\n          });\n          watchSwitch = false;\n          break;\n        }\n      }\n      if (watchSwitch) {\n        $(`#originalWaveform > wave > region`).css({\n          background: \"rgba(181, 198, 241, 0.2)\",\n        });\n      }\n    }\n    count == 0 ? clearInterval(timer) : count--;\n  }, 25);\n};\nconst modifiedVideoTimeEvent = (that) => {\n  let count = 10;\n  let timer = setInterval(() => {\n    let nowTime = that.currentTime();\n    if (nowTime >= duration.value) {\n      clearInterval(timer);\n      watchVideo(nowTime);\n      return;\n    }\n    modifiedVideoTime.value = nowTime;\n    modifiedWavesurfer.value.seekAndCenter(\n      modifiedVideoTime.value / duration.value > 1\n        ? 1\n        : modifiedVideoTime.value / duration.value\n    );\n    watchVideo(modifiedVideoTime.value);\n    echartTimeOffset(modifiedVideoTime.value);\n    sliderValue.value = (modifiedVideoTime.value / duration.value) * 100;\n    count == 0 ? clearInterval(timer) : count--;\n  }, 25);\n};\nvar lastword = \"\";\nconst echartTimeOffset = (modifiedVideoTime) => {\n  for (let i = props.textList.length - 1; i >= 0; i--) {\n    if (\n      modifiedVideoTime >= props.textList[i].start &&\n      lastword != props.textList[i].text &&\n      modifiedVideoTime <= props.textList[i].end\n    ) {\n      lastword = props.textList[i].text;\n      option.series[0].markLine.data[0].xAxis = i;\n      myChart.setOption(\n        {\n          series: option.series,\n        },\n        false,\n        false\n      );\n      break;\n    }\n  }\n};\nconst hightLightInit = () => {\n  $(`#modifiedWave > wave > region`).css({\n    background: \"rgba(181, 198, 241, 0.2)\",\n  });\n  $(`.pageContainer .viewResultContainer .textContent span`).css({\n    background: \"#fff\",\n  });\n};\nconst highlightOver = (index, background, textBackground) => {\n  $(`#modifiedWave > wave > region:nth-child(${index + 3})`).css({\n    background,\n  });\n  $(\n    `.pageContainer .viewResultContainer .textContent span:nth-child(${\n      index + 1\n    })`\n  ).css({\n    background: textBackground,\n  });\n};\nconst watchVideo = (videoTime) => {\n  if (videoTime > textList.value[textList.value.length - 1].end) {\n    hightLightInit();\n    OperationMethod.dragBackgroundColor(\n      editAligned.value,\n      textList.value.length\n    );\n    return;\n  }\n  let watchSwitch = true;\n  for (let index = 0; index < textList.value.length; index++) {\n    if (\n      textList.value[index].start < videoTime &&\n      videoTime <= textList.value[index].end\n    ) {\n      highlightOver(index - 1, \"rgba(181, 198, 241, 0.2)\", \"#fff\");\n      highlightOver(\n        index,\n        \"rgba(255, 228, 196, 0.5)\",\n        \"rgba(255, 228, 196, 0.5)\"\n      );\n      OperationMethod.dragBackgroundColor(\n        editAligned.value,\n        textList.value.length\n      );\n      watchSwitch = false;\n      break;\n    }\n  }\n  if (watchSwitch) {\n    hightLightInit();\n    OperationMethod.dragBackgroundColor(\n      editAligned.value,\n      textList.value.length\n    );\n  }\n};\nvar originalLocked = true;\nvar modifiedLocked = true;\nconst originalVideo = () => {\n  originalPlayer.value = videojs(\"viewOriginal\", {}, function onPlayerReady() {\n    this.on(\"play\", function (e) {\n      modifiedPlayer.value.play();\n      modifiedVideoTimeEvent(this);\n      originalVideoTimeEvent(this);\n      this.volume(0);\n      modifiedPlayer.value.volume(1);\n      mediaPaused.value = false;\n    });\n    this.on(\"seeked\", function () {\n      originalLocked == false;\n      if (modifiedLocked) {\n        let nowTime = this.currentTime();\n        modifiedPlayer.value.currentTime(nowTime);\n      }\n      modifiedLocked = true;\n      $(`#originalWaveform > wave > region`).css({\n        background: \"rgba(181, 198, 241, 0.2)\",\n      });\n      hightLightInit();\n    });\n    this.on(\"pause\", function () {\n      mediaPaused.value = true;\n      modifiedPlayer.value.pause();\n    });\n  });\n};\nconst modifiedVideo = () => {\n  modifiedPlayer.value = videojs(\"viewModified\", {}, function onPlayerReady() {\n    this.on(\"play\", function (e) {\n      originalPlayer.value.play();\n      modifiedVideoTimeEvent(this);\n      originalVideoTimeEvent(this);\n      mediaPaused.value = false;\n      this.volume(0);\n      originalPlayer.value.volume(1);\n    });\n    this.on(\"timeupdate\", function (e) {\n      originalVideoTimeEvent(this);\n      modifiedVideoTimeEvent(this);\n    });\n    this.on(\"seeked\", function () {\n      modifiedLocked = false;\n      if (originalLocked) {\n        let nowTime = this.currentTime();\n        originalPlayer.value.currentTime(nowTime);\n      }\n      originalLocked == true;\n      $(`#originalWaveform > wave > region`).css({\n        background: \"rgba(181, 198, 241, 0.2)\",\n      });\n      hightLightInit();\n    });\n    this.on(\"pause\", function () {\n      mediaPaused.value = true;\n      originalPlayer.value.pause();\n    });\n  });\n};\n\nconst modifiedDefenceList = ref([\n  { label: \"Modified\", value: \"Modified\" },\n  { label: \"Defended\", value: \"Defended\" },\n]);\n\nconst modifiedDefence = ref(\"Modified\");\nconst defenceChange = () => {\n  modifiedPlayer.value.currentTime(0);\n  originalPlayer.value.currentTime(0);\n  option.series[0].markLine.data[0].xAxis = 0;\n  myChart.setOption(option, false, false);\n  modifiedPlayer.value.dispose();\n  var url = videoUrl.value;\n  if (modifiedDefence.value != \"Modified\") {\n    url = props.defenceVideoUrl;\n  }\n  let html =\n    '<video id=\"viewModified\" class=\"video-js vjs-big-play-centered\" controls data-setup=\"{}\"><source src=\"' +\n    url +\n    '\" type=\"video/mp4\" /></video>';\n  document.getElementById(\"viewModifiedContainer\").innerHTML = html;\n  modifiedVideo();\n  modifiedWaveSwitch.value = false;\n  setTimeout(() => {\n    modifiedWaveSwitch.value = true;\n    setTimeout(() => {\n      modifiedEvent(url);\n    }, 2);\n  }, 2);\n};\nconst originalSeekToTime = (textitem) => {\n  $(`#originalWaveform > wave > region`).css({\n    background: \"rgba(181, 198, 241, 0.2)\",\n  });\n  if (textitem == null) {\n    setTimeout(() => {\n      originalPlayer.value.currentTime(\n        originalWavesurfer.value.getCurrentTime() + 0.000005\n      );\n    }, 5);\n  } else {\n    originalPlayer.value.currentTime(textitem + 0.000005);\n  }\n};\nconst modifiedSeekToTime = (textitem) => {\n  hightLightInit();\n  if (textitem == null) {\n    setTimeout(() => {\n      modifiedPlayer.value.currentTime(\n        modifiedWavesurfer.value.getCurrentTime() + 0.000005\n      );\n    }, 5);\n  } else {\n    modifiedPlayer.value.currentTime(textitem + 0.000005);\n  }\n};\nonMounted(() => {\n  originalEvent();\n  modifiedEvent(videoUrl.value);\n  chartCreate();\n  originalVideo();\n  modifiedVideo();\n});\n\nconst playVideo = (type) => {\n  if (type == \"play\") {\n    if (sliderValue.value != 100) {\n      mediaPaused.value\n        ? modifiedPlayer.value.play()\n        : modifiedPlayer.value.pause();\n      mediaPaused.value = !mediaPaused.value;\n    }\n  } else if (type == \"start\") {\n    modifiedPlayer.value.currentTime(0);\n    option.series[0].markLine.data[0].xAxis = 0;\n    myChart.setOption(\n      {\n        series: option.series,\n      },\n      false,\n      false\n    );\n  } else if (type == \"end\") {\n    modifiedPlayer.value.currentTime(duration.value - 0.000005);\n    option.series[0].markLine.data[0].xAxis = props.textList.length - 1;\n    myChart.setOption(\n      {\n        series: option.series,\n      },\n      false,\n      false\n    );\n  } else if (type == \"last\") {\n    if (\n      modifiedVideoTime.value > textList.value[textList.value.length - 1].end\n    ) {\n      modifiedPlayer.value.currentTime(\n        textList.value[textList.value.length - 1].start + 0.000005\n      );\n    } else if (\n      modifiedVideoTime.value > textList.value[textList.value.length - 1].start\n    ) {\n      modifiedPlayer.value.currentTime(\n        textList.value[textList.value.length - 2].start + 0.000005\n      );\n    } else if (\n      modifiedVideoTime.value < textList.value[textList.value.length - 1].start\n    ) {\n      let videoTime = 0;\n      for (let index = 0; index < textList.value.length; index++) {\n        if (\n          textList.value[index].start < modifiedVideoTime.value &&\n          modifiedVideoTime.value <= textList.value[index + 1].start\n        ) {\n          if (index) {\n            videoTime = textList.value[index - 1].start + 0.000005;\n          }\n          break;\n        }\n      }\n      modifiedPlayer.value.currentTime(videoTime);\n    }\n  } else if (type == \"next\") {\n    if (modifiedVideoTime.value < textList.value[0].start) {\n      modifiedPlayer.value.currentTime(textList.value[0].start + 0.000005);\n    } else if (\n      modifiedVideoTime.value < textList.value[textList.value.length - 1].start\n    ) {\n      let videoTime = 0;\n      for (let index = 0; index < textList.value.length; index++) {\n        if (\n          textList.value[index].start < modifiedVideoTime.value &&\n          modifiedVideoTime.value <= textList.value[index + 1].start\n        ) {\n          videoTime = textList.value[index + 1].start + 0.000005;\n          break;\n        }\n      }\n      modifiedPlayer.value.currentTime(videoTime);\n    }\n  }\n};\nconst sliderChange = (e) => {\n  modifiedPlayer.value.currentTime(\n    (sliderValue.value / 100) * duration.value + 0.000005\n  );\n};\nconst formatTooltip = (e) => {\n  return Math.floor((e / 100) * duration.value * 100) / 100 + \"S\";\n};\n</script>\n<style lang=\"scss\" scope>\n.viewResultContainer {\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n}\n.topContainer {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n.video-js {\n  width: 300px;\n  height: 225px;\n}\n.labelContainer {\n  font-size: 15px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n.labelTitle {\n  display: inline-block;\n  width: 80px;\n}\n.viewOriginal {\n  margin-top: 10px;\n}\n.labelContent:hover {\n  cursor: pointer;\n}\n.viewModified {\n  margin-top: 10px;\n}\n.featureContainer {\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n}\n.selectContainer {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 30px;\n}\n.selectTitle {\n  width: 180px;\n  font-size: 15px;\n}\n.waveform {\n  height: 75px;\n  box-shadow: 0 0 1px 1px rgba(181, 198, 241, 0.2);\n  margin-top: 15px;\n  margin-left: 30px;\n  width: 465px;\n}\n#modifiedWave,\n#originalWaveform {\n  height: 60px !important;\n}\n#modifiedWave > wave,\n#originalWaveform > wave {\n  height: 60px !important;\n  &::-webkit-scrollbar {\n    height: 10px;\n  }\n  &::-webkit-scrollbar-track {\n    background-color: rgb(255, 255, 255);\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.2);\n  }\n  &::-webkit-scrollbar-thumb {\n    background-color: rgb(207, 207, 207);\n    border-radius: 10px;\n  }\n}\n#originalWaveTimeline > timeline,\n#originalWaveTimeline > timeline > canvas {\n  height: 17px !important;\n}\n.bottomContainer {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .textContent {\n    margin-top: 10px;\n    padding-bottom: 20px;\n    font-size: 18px;\n    line-height: 25px;\n    span {\n      display: inline-block;\n      margin-top: 5px;\n      margin-right: 10px;\n      user-select: none;\n      &:hover {\n        background-color: rgba(255, 228, 196, 0.5);\n        cursor: pointer;\n      }\n    }\n  }\n  .audioContainer {\n    width: 500px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    .control {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin-top: 10px;\n      width: 400px;\n      .icon {\n        height: 30px;\n        width: 30px;\n      }\n    }\n  }\n}\n.dialogScoresContainer {\n  margin-top: -20px;\n  width: 180px;\n  .dialogItem {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin-top: 10px;\n    .dialogTitle {\n      width: 155px;\n    }\n  }\n}\n.el-dialog__body {\n  height: auto !important;\n}\n.dialogContainer {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n}\n.el-input__wrapper {\n  background-color: transparent;\n}\n.methodOne {\n  width: 80px;\n}\n.methodTwo {\n  margin-left: 10px;\n  width: 150px;\n}\n.questionFilled {\n  color: #bbbbbb;\n  height: 33px;\n  margin-left: 10px;\n}\n.boxItemTip {\n  width: 200px;\n}\n.modifiedDefence {\n  width: 120px;\n  margin-right: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}